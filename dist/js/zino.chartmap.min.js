(function(k,D){function E(){o.$body=k(document.body);o.margin=o.$body.offset();o.padding={left:Number(o.$body.css("paddingLeft").replace("px","")),top:Number(o.$body.css("paddingTop").replace("px",""))}}function m(){this._defaults={plugin:"svg",map:"BG",fill:"#5DC1E4",hover:"#957030",background:"#FFFFFF",palette:true,provinces:true,font:{family:"Arial",size:"12px"},tooltip:{color:"#fff",fill:"#000",radius:0,opacity:1,offset:{x:15,y:15},pattern:"%name"},legend:[],zoom:11,width:530,height:320,click:null}}
var o={};k(function(){E.call(null)});k(window).on("resize",function(){E.call(null)});var l={cutHex:function(a){return a.charAt(0)=="#"?a.substring(1,7):a},hexToR:function(a){return parseInt(l.cutHex(a).substring(0,2),16)},hexToG:function(a){return parseInt(l.cutHex(a).substring(2,4),16)},hexToB:function(a){return parseInt(l.cutHex(a).substring(4,6),16)},hexToRgb:function(a){return[l.hexToR(a),l.hexToG(a),l.hexToB(a)]},rgbToHex:function(a,b,c){return["#",l.toHex(a),l.toHex(b),l.toHex(c)].join("")},
toHex:function(a){a=parseInt(a,10);if(isNaN(a))return"00";a=Math.max(0,Math.min(a,255));return["0123456789ABCDEF".charAt((a-a%16)/16),"0123456789ABCDEF".charAt(a%16)].join("")},rgbToHsv:function(a,b,c){var f=0,e=0,d=0;a=parseInt((""+a).replace(/\s/g,""),10);b=parseInt((""+b).replace(/\s/g,""),10);c=parseInt((""+c).replace(/\s/g,""),10);if(a===null||b===null||c===null||isNaN(a)||isNaN(b)||isNaN(c))return false;if(a<0||b<0||c<0||a>255||b>255||c>255)return false;a/=255;b/=255;c/=255;e=Math.min(a,Math.min(b,
c));d=Math.max(a,Math.max(b,c));if(e===d){d=e;return[0,0,d]}f=60*((a===e?3:c===e?1:5)-(a===e?b-c:c===e?a-b:c-a)/(d-e));e=(d-e)/d;d=d;return[f,e,d]},hsvToRgb:function(a){var b,c;if(a[1]===0)b=c=a=Math.round(a[2]*2.55);else{a[0]/=60;b=Math.floor(a[0]);c=a[0]-b;var f=a[2]*(1-a[1]),e=a[2]*(1-a[1]*c),d=a[2]*(1-a[1]*(1-c));switch(b){case 0:b=a[2];c=d;a=f;break;case 1:b=e;c=a[2];a=f;break;case 2:b=f;c=a[2];a=d;break;case 3:b=f;c=e;a=a[2];break;case 4:b=d;c=f;a=a[2];break;default:b=a[2];c=f;a=e}b=Math.round(b*
255);c=Math.round(c*255);a=Math.round(a*255)}return[b,c,a]},hueShift:function(a,b){for(a+=b;a>=360;)a-=360;for(;a<0;)a+=360;return a},complementary:function(a){a=a.match(/[0-9a-fA-F]+/)?l.hexToRgb(a):a;a=l.rgbToHsv(a[0],a[1],a[2]);a[0]=l.hueShift(a[0],180);a=l.hsvToRgb(a);return l.rgbToHex(a[0],a[1],a[2])}};m.getWebsafeColors=function(){var a,b,c,f=[],e=["00","33","66","99","CC","FF"];for(a=0;a<6;a++)for(b=0;b<6;b++)for(c=0;c<6;c++)f.push(["#",e[a],e[b],e[c]].join(""));return f};m.getColorLuminance=
function(a,b){a=String(a).replace(/[^0-9a-f]/gi,"");if(a.length<6)a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2];b=b||0;var c="#",f,e;for(e=0;e<3;e++){f=parseInt(a.substr(e*2,2),16);f=Math.round(Math.min(Math.max(0,f+f*b),255)).toString(16);c+=("00"+f).substr(f.length)}return c};m.getColors=function(a){var b=["#3366CC","#DC3912","#067A06","#FFCC00","#663300","#660066","#3399CC","#CC6600","#CC3399","#CC6666","#339900","#CC99FF","#CC3300","#99FF66","#993366","#16448A"];if(a!==D&&b[a]!==D)return b[a];return b};m.getColorPalette=
function(a,b){var c=0,f="up",e=0.2,d=[];switch(arguments.length){case 3:f=arguments[2];break;case 4:f=arguments[2];e=arguments[3];break}for(var g=0;g<b;g+=1){if(f=="up")c+=e;else c-=e;d.push(m.getColorLuminance(a,c))}return d};m.prototype={_attachChartmap:function(a,b){if(this._getInst(a))return false;var c=this._newInst(k(a));k.extend(c.settings,this._defaults,b);c.settings.earthRadius=6378137;c.settings.index=c.settings.earthRadius/Math.max(c.settings.width,c.settings.height);c.settings.wIndex=
c.settings.earthRadius/c.settings.width;c.settings.hIndex=c.settings.earthRadius/c.settings.height;switch(c.settings.plugin){case "svg":c.handle=zino.Svg({target:a,width:c.settings.width,height:c.settings.height,viewBox:"0 0 WW HH".replace("WW",c.settings.width).replace("HH",c.settings.height),preserveAspectRatio:"xMidYMid meet",namespaces:{zui:"http://zinoui.com/svgns"}});c.handle.desc("Created with ZinoUI "+k.zinoChartmap.version);b=c.handle.clipPath("zinoui-1").getShape();c.handle.rect(0,0,0,0,
c.settings.width,c.settings.height,false).attr({fill:"none"}).appendTo(b);break}k.data(a,"chartmap",c);this.draw.call(this,a)},draw:function(a){var b=this._getInst(a);if(!b)return false;switch(b.settings.plugin){case "svg":b.handle.rect(0,0,0,0,b.settings.width,b.settings.height).attr({fill:b.settings.background.length?b.settings.background:"none",stroke:"none","stroke-width":0}).insert();break}this.map.call(this,a)},map:function(a){function b(h,i){h=k(i);var n=h.attr("fill"),v=i.getAttributeNS("zui",
"hover");h.data("fill",n);i.setAttributeNS(null,"fill",v||d.settings.hover||l.complementary(n));if(d.settings.tooltip){x.firstChild.firstChild.nodeValue=i.getAttributeNS("zui","tooltip");i=x.getBBox();w.setAttributeNS(null,"width",Number(i.width)+10);w.setAttributeNS(null,"height",Number(i.height)+10);s.setAttributeNS(null,"visibility","visible")}}function c(h,i){i.setAttributeNS(null,"fill",k(i).data("fill"));d.settings.tooltip&&s.setAttributeNS(null,"visibility","hidden")}function f(h){if(d.settings.tooltip){var i=
h.clientX;h=h.clientY;var n=0,v=0,F=parseInt(w.getAttributeNS(null,"width"),10),G=parseInt(w.getAttributeNS(null,"height"),10);if(!isNaN(d.settings.tooltip.offset.x))n=d.settings.tooltip.offset.x;if(!isNaN(d.settings.tooltip.offset.y))v=d.settings.tooltip.offset.y;i-=o.margin.left+o.padding.left;h-=o.margin.top+o.padding.top;if(h+G+v>d.settings.height)h-=G+v;if(i+F+n>d.settings.width)i-=F+n;s.setAttributeNS(null,"transform",["translate(",i,",",h,")"].join(""))}}function e(h,i){d.settings.click&&d.settings.click.call(this,
h,i)}var d=this._getInst(a);if(!d)return false;if(!(d.settings.map in zino.Chartmap.countries))throw new Error(["Please verify that ",d.settings.map,".js is loaded."].join(""));var g=zino.Chartmap.countries[d.settings.map],p=parseInt(g.scale),q=m.getColorPalette(d.settings.fill,g.provinces.length,"down",0.005);m.getColors();var j,r,y,H,t,I,u,s,J,w,x,z,A,C,K,B;switch(d.settings.plugin){case "svg":I=d.handle.g().attr({"class":"zui-chartmap-map",visibility:"hidden",transform:"translate(XX,YY) scale(ZOOMX,ZOOMY)".replace("XX",
-g.minx*p/d.settings.index*d.settings.zoom).replace("YY",g.maxy*p/d.settings.index*d.settings.zoom).replace(/ZOOMX/g,parseFloat(d.settings.zoom)*1).replace(/ZOOMY/g,parseFloat(d.settings.zoom)*-1)});u=I.getShape();if(d.settings.provinces){j=0;for(r=g.provinces.length;j<r;j+=1){y=0;for(H=g.provinces[j].polygon.length;y<H;y+=1){t=g.provinces[j].polygon[y].split(" ");t.forEach(function(h,i,n){n[i]=(parseFloat(h)*p/d.settings.index).toFixed(2);isNaN(n[i])});z=d.settings.palette?q[j]||m.getColorLuminance(d.settings.fill,
1-j/10):d.settings.fill;A=d.settings.hover;d.settings.provinces.length>0&&d.settings.provinces.forEach(function(h){if(typeof h==="string"&&h==g.provinces[j].id){z=d.settings.fill;A=d.settings.hover}else if(h.id&&h.id==g.provinces[j].id){z=h.fill||d.settings.fill;A=h.hover||d.settings.hover}});d.handle.polygon(t.join(" ")).attr({"zui:tooltip":d.settings.tooltip.pattern?d.settings.tooltip.pattern.replace("%name",g.provinces[j].name):g.provinces[j].name,id:g.provinces[j].id,fill:z,"zui:hover":A}).bind("mouseenter",
b).bind("mouseleave",c).bind("mousemove",f).bind("click",e).appendTo(u)}}}else{j=0;for(r=g.country.length;j<r;j+=1){t=g.country[j].split(" ");t.forEach(function(h,i,n){n[i]=(parseFloat(h)*p/d.settings.index).toFixed(2)});d.handle.polygon(t.join(" ")).attr({"zui:tooltip":d.settings.tooltip.pattern?d.settings.tooltip.pattern.replace("%name",g.name):g.name,fill:d.settings.fill,"zui:hover":d.settings.hover}).bind("mouseenter",b).bind("mouseleave",c).bind("mousemove",f).bind("click",e).appendTo(u)}}J=
d.handle.g().append(u).getShape();setTimeout(function(){C=u.getBoundingClientRect();K=(d.settings.width-C.width)/2;B=(d.settings.height-C.height)/2;if(B<0)B=0;J.setAttributeNS(null,"transform","translate(XX,YY)".replace("XX",K).replace("YY",B));u.setAttributeNS(null,"visibility","visible")},1);d.settings.legend&&this._showLegendChartmap.call(this,a);if(d.settings.tooltip){s=d.handle.g().attr({"class":"zui-chartmap-tooltip",visibility:"hidden",transform:"translate(0,0)"}).getShape();r=q=a=0;if(!isNaN(d.settings.tooltip.offset.x))a=
d.settings.tooltip.offset.x;if(!isNaN(d.settings.tooltip.offset.y))q=d.settings.tooltip.offset.y;if(!isNaN(d.settings.tooltip.radius)&&d.settings.tooltip.radius>=0)r=d.settings.tooltip.radius;w=d.handle.rect(a,q,r,r,100,22,false).attr({fill:d.settings.tooltip.fill,opacity:d.settings.tooltip.opacity}).appendTo(s).getShape();x=d.handle.factory("text",false).attr({x:a+5,y:q+5,fill:d.settings.tooltip.color,"font-family":d.settings.font.family,"font-size":d.settings.font.size,"text-anchor":"start","dominant-baseline":"text-before-edge"}).appendTo(s).getShape();
a=d.handle.factory("tspan",false).attr({"alignment-baseline":"text-before-edge"}).appendTo(x).getShape();d.handle.textNode("",false).appendTo(a)}break}},_hideLegendChartmap:function(a){if(!this._getInst(a))return false;k(a).find(".zui-chartmap-legend").remove()},_showLegendChartmap:function(a){var b=this._getInst(a);if(!b)return false;a=0;if(b.settings.legend.items)a=b.settings.legend.items.length;if(a){var c,f,e,d,g=e=0,p=[],q=0,j=0;m.getColors();if(b.settings.plugin==="svg"){f=b.handle.g().attr({"class":"zui-chartmap-legend"}).getShape();
b.handle.rect(0,0,0,0,0,0,false).attr({fill:b.settings.legend.fill.length?b.settings.legend.fill:"none"}).appendTo(f)}for(c=0;c<a;c++)switch(b.settings.plugin){case "svg":b.handle.rect(0,10,0,0,12,12,false).attr({fill:b.settings.legend.items[c].fill,stroke:"none","stroke-width":0}).appendTo(f);e=b.handle.factory("text",false).attr({x:0,y:10,fill:b.settings.legend.color,"font-family":b.settings.font.family,"font-size":b.settings.font.size,"text-anchor":"start","dominant-baseline":"text-before-edge"}).appendTo(f).getShape();
d=b.handle.factory("tspan",false).attr({"alignment-baseline":"text-before-edge"}).appendTo(e).getShape();b.handle.textNode(b.settings.legend.items[c].label,false).appendTo(d);e=e.getBoundingClientRect();p[1+c*2]=15;p[1+c*2+1]=e.width+5;g+=p[1+c*2];g+=p[1+c*2+1];e=e.height;break}switch(b.settings.legend.position){case "top":q=15;break;case "bottom":q=b.settings.height-e-15;break}switch(b.settings.legend.alignment){case "left":j=15;break;case "middle":j=(b.settings.width-g)/2;break;case "right":j=b.settings.width-
g-15;break}if(b.settings.plugin==="svg"){c=b=0;for(a=f.childNodes.length;c<a;c+=1)if(c>0){f.childNodes[c].setAttributeNS(null,"x",j+b);f.childNodes[c].setAttributeNS(null,"y",q);b+=p[c]}else{f.childNodes[c].setAttributeNS(null,"width",g+10);f.childNodes[c].setAttributeNS(null,"height",e+10);f.childNodes[c].setAttributeNS(null,"x",j-5);f.childNodes[c].setAttributeNS(null,"y",q-5)}}}},_newInst:function(a){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,uid:Math.floor(Math.random()*99999999),
isDisabled:false,settings:{}}},_getInst:function(a){try{return k.data(a,"chartmap")}catch(b){throw"Missing instance data for this chartmap";}}};k.fn.zinoChartmap=function(a){var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&a=="isDisabled")return k.zinoChartmap["_"+a+"Chartmap"].apply(k.zinoChartmap,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return k.zinoChartmap["_"+a+"Chartmap"].apply(k.zinoChartmap,[this[0]].concat(b));return this.each(function(){typeof a==
"string"?k.zinoChartmap["_"+a+"Chartmap"].apply(k.zinoChartmap,[this].concat(b)):k.zinoChartmap._attachChartmap(this,a)})};k.zinoChartmap=new m;k.zinoChartmap.version="1.5";window.zino=window.zino||{};window.zino.Chartmap={countries:{}}})(jQuery);