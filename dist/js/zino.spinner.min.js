!function(d){"use strict";var p="spinner",o=!1;function n(){this._defaults={min:0,max:100,step:1,align:"right",disabled:!1,decimals:2,create:null,change:null}}n.prototype={_attachSpinner:function(i,n){if(this._getInst(i))return o;var e,s,t,a=d(i),r=this,l=r._newInst(a);d.extend(l.settings,r._defaults,n),n=d("<span>").addClass("zui-spinner zui-spinner-holder").attr("aria-disabled",l.settings.disabled),e=d("<span>").addClass("zui-spinner-handle"),s=d("<span>",{title:"Increase value",unselectable:"on",role:"button","aria-disabled":l.settings.disabled}).addClass("zui-spinner-up zui-unselectable").append("<span>").bind("click.spinner",function(){r._increaseSpinner.call(r,i)}).bind("mouseenter.spinner",function(){d(this).addClass("zui-spinner-up-hover")}).bind("mouseleave.spinner",function(){d(this).removeClass("zui-spinner-up-hover")}).bind("mousedown.spinner",function(){d(this).addClass("zui-spinner-up-click")}).bind("mouseup.spinner",function(){d(this).removeClass("zui-spinner-up-click")}).appendTo(e),t=d("<span>",{title:"Decrease value",unselectable:"on",role:"button","aria-disabled":l.settings.disabled}).addClass("zui-spinner-down zui-unselectable").append("<span>").bind("click.spinner",function(){r._decreaseSpinner.call(r,i)}).bind("mouseenter.spinner",function(){d(this).addClass("zui-spinner-down-hover")}).bind("mouseleave.spinner",function(){d(this).removeClass("zui-spinner-down-hover")}).bind("mousedown.spinner",function(){d(this).addClass("zui-spinner-down-click")}).bind("mouseup.spinner",function(){d(this).removeClass("zui-spinner-down-click")}).appendTo(e),a.attr({autocomplete:"off",role:"spinbutton","aria-invalid":"false","aria-valuemin":l.settings.min,"aria-valuemax":l.settings.max,"aria-valuenow":0}).addClass("zui-spinner-input").bind("keydown.spinner",function(n){var e=n.charCode||n.keyCode||0;return 38===e?(r._increaseSpinner.call(r,i),!1):40===e?(r._decreaseSpinner.call(r,i),!1):!(!/^(4[8-9]|5[0-7]|110|190|8|3[5-9]|40|9[6-9]|10[0-5])$/.test(e)||/^(110|190)$/.test(e)&&-1!==n.target.value.indexOf("."))&&void 0}).bind("focusin.spinner",function(n){d(this).parent().addClass("zui-spinner-focus")}).bind("focusout.spinner",function(n){d(this).parent().removeClass("zui-spinner-focus"),r._valueSpinner.call(r,i,d(i).val())}),l.settings.disabled&&(n.addClass("zui-spinner-disabled"),a.prop("disabled",!0),s.addClass("zui-spinner-disabled"),t.addClass("zui-spinner-disabled")),n.css("width",a.width()+25+"px"),n.bind("spinnercreate",function(n,e){null!==l.settings.create&&l.settings.create.call(i,n,e)}).bind("spinnerchange",function(n,e){null!==l.settings.change&&l.settings.change.call(i,n,e)}),a.after(n),n.append(a).append(e),l.holder=n.get(0),l.handle=e.get(0),d.data(i,p,l),0===a.val().length&&r._valueSpinner.call(r,i,l.settings.min),n.trigger("spinnercreate",{min:l.settings.min,max:l.settings.max,step:l.settings.step})},_decreaseSpinner:function(n){var e=this._getInst(n);if(!e||e.settings.disabled)return o;var i=parseFloat(e.input.val()),s=i-e.settings.step;s>=e.settings.min&&(this._valueSpinner.call(this,n,s),d(e.holder).trigger("spinnerchange",{before:i,after:s,min:e.settings.min,max:e.settings.max,step:e.settings.step}))},_increaseSpinner:function(n){var e=this._getInst(n);if(!e||e.settings.disabled)return o;var i=parseFloat(e.input.val()),s=i+e.settings.step;s>e.settings.max&&(s=e.settings.max),this._valueSpinner.call(this,n,s),d(e.holder).trigger("spinnerchange",{before:i,after:s,min:e.settings.min,max:e.settings.max,step:e.settings.step})},_enableSpinner:function(n){var e=this._getInst(n);if(!e)return o;d(n).prop("disabled",!1),d(e.holder).attr("aria-disabled","false").removeClass("zui-spinner-disabled"),d(".zui-spinner-up, .zui-spinner-down",e.holder).attr("aria-disabled","false").removeClass("zui-spinner-disabled"),e.settings.disabled=o,d.data(n,p,e)},_disableSpinner:function(n){var e=this._getInst(n);if(!e)return o;d(n).prop("disabled",!0),d(e.holder).attr("aria-disabled","true").addClass("zui-spinner-disabled"),d(".zui-spinner-up, .zui-spinner-down",e.holder).attr("aria-disabled","true").addClass("zui-spinner-disabled"),e.settings.disabled=!0,d.data(n,p,e)},_destroySpinner:function(n){var e=this._getInst(n);if(!e)return o;var i=d(e.holder),e=(d(e.handle),d(n));e.insertAfter(i),i.remove(),e.removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeAttr("aria-invalid").removeAttr("aria-disabled").removeAttr("role").removeAttr("autocomplete").removeClass("zui-spinner-input").unbind(".spinner"),d.data(n,p,o)},_valueSpinner:function(n,e){var i=this._getInst(n);if(!i)return o;e=parseFloat(e).toFixed(i.settings.decimals);i.input.val(e),i.input.attr("aria-valuenow",e),e<i.settings.min||e>i.settings.max?i.input.attr("aria-invalid","true"):i.input.attr("aria-invalid","false"),d.data(n,p,i)},_newInst:function(n){return{id:n[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:n,uid:Math.floor(99999999*Math.random()),isDisabled:o,settings:{}}},_getInst:function(n){try{return d.data(n,p)}catch(n){throw"Missing instance data for this spinner"}}},d.fn.zinoSpinner=function(n){var e=Array.prototype.slice.call(arguments,1);return"string"==typeof n&&"isDisabled"===n||"option"===n&&2===arguments.length&&"string"==typeof arguments[1]?d.zinoSpinner["_"+n+"Spinner"].apply(d.zinoSpinner,[this[0]].concat(e)):this.each(function(){"string"==typeof n?d.zinoSpinner["_"+n+"Spinner"].apply(d.zinoSpinner,[this].concat(e)):d.zinoSpinner._attachSpinner(this,n)})},d.zinoSpinner=new n,d.zinoSpinner.version="1.5.1"}(jQuery);