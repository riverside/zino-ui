(function(a,r){function t(){this._defaults={items:[],disabled:!1,select:null,focus:null,blur:null,create:null}}t.prototype={_attachRating:function(b,c){if(this._getInst(b))return!1;var d,k,g,l,q,m,h=a(b),n=this,e=n._newInst(h);a.extend(e.settings,n._defaults,c);b.disabled!==r&&!0===b.disabled&&(e.settings.disabled=!0);switch(b.nodeName){case "INPUT":switch(b.type){case "range":h.hide();var f;f=parseFloat(h.attr("min"));var p=parseFloat(h.attr("max"));l=parseFloat(h.attr("value"));m=0;for(d=a("<span>").addClass("zui-rating");f<=
p;f+=1)g=a("<a>",{href:"#",title:f,"data-label":f,"data-value":f}).addClass("zui-rating-star").append("<span></span>"),l!==r&&0===m&&(g.addClass("zui-rating-star-selected"),l===f&&(m=1)),g.appendTo(d);d.insertAfter(h)}break;case "SELECT":h.hide();d=a("<span>").addClass("zui-rating");l=a("option:selected",h).val();m=0;a("option",h).each(function(b,c){k=a(c);q=k.val();g=a("<a>",{href:"#",title:k.text(),"data-label":k.text(),"data-value":q}).addClass("zui-rating-star").append("<span></span>");""!==l&&
0===m&&(g.addClass("zui-rating-star-selected"),l===q&&(m=1));g.appendTo(d)});d.insertAfter(h);break;default:d=h.addClass("zui-rating zui-rating-custom");l=-1;f=m=0;for(p=e.settings.items.length;f<p;f++)if(e.settings.items[f].checked){l=f;break}f=0;for(p=e.settings.items.length;f<p;f++)g=a("<a>",{href:"#",title:e.settings.items[f].label,"data-label":e.settings.items[f].label,"data-value":e.settings.items[f].value}).addClass("zui-rating-star").append("<span></span>"),0<=l&&0===m&&(g.addClass("zui-rating-star-selected"),
l===f&&(m=1)),g.appendTo(d)}d&&(e.settings.disabled&&a(".zui-rating-star",d).addClass("zui-rating-star-disabled"),d.on("click",".zui-rating-star",function(a){a&&a.preventDefault&&a.preventDefault();e.settings.disabled||n._selectRating.call(n,b,this);return!1}).on("mouseenter",".zui-rating-star",function(a){e.settings.disabled||n._focusRating.call(n,b,this)}).on("mouseleave",".zui-rating-star",function(a){e.settings.disabled||n._blurRating.call(n,b,this)}),h.bind("ratingcreate",function(a,c){null!==
e.settings.create&&e.settings.create.call(b,a,c)}).bind("ratingselect",function(a,c){null!==e.settings.select&&e.settings.select.call(b,a,c)}).bind("ratingfocus",function(a,c){null!==e.settings.focus&&e.settings.focus.call(b,a,c)}).bind("ratingblur",function(a,c){null!==e.settings.blur&&e.settings.blur.call(b,a,c)}),e.holder=d.get(0));a(b).trigger("ratingcreate",{});a.data(b,"rating",e)},_focusRating:function(b,c){var d=this._getInst(b);if(!d)return!1;var k=a(c),g=a(".zui-rating-star",d.holder).index(c);
a(".zui-rating-star",d.holder).filter(":gt("+g+")").removeClass("zui-rating-star-focus").end().filter(":lt("+(g+1)+")").addClass("zui-rating-star-focus");a(b).trigger("ratingfocus",{input:c,index:g,value:k.data("value"),label:k.data("label")})},_blurRating:function(b){var c=this._getInst(b);if(!c)return!1;a(".zui-rating-star",c.holder).removeClass("zui-rating-star-focus");a(b).trigger("ratingblur",{})},_selectRating:function(b,c){var d=this._getInst(b);if(!d)return!1;var k=a(c),g=a(".zui-rating-star",
d.holder).index(c);a(".zui-rating-star",d.holder).removeClass("zui-rating-star-focus zui-rating-star-selected").filter(":lt("+(g+1)+")").addClass("zui-rating-star-selected");a(b).trigger("ratingselect",{input:c,index:g,value:k.data("value"),label:k.data("label")})},_enableRating:function(b){var c=this._getInst(b);if(!c)return!1;a(".zui-rating-star",c.holder).removeClass("zui-rating-star-disabled");c.settings.disabled=!1;a.data(b,"rating",c)},_disableRating:function(b){var c=this._getInst(b);if(!c)return!1;
a(".zui-rating-star",c.holder).addClass("zui-rating-star-disabled");c.settings.disabled=!0;a.data(b,"rating",c)},_destroyRating:function(b){var c=this._getInst(b),d=a(b);if(!c)return!1;c=a(c.holder);c.hasClass("zui-rating-custom")?(c.removeClass("zui-rating zui-rating-custom"),a("zui-rating-star",c).remove()):c.remove();d.is(":visible")||d.show();a.data(b,"rating",!1)},_newInst:function(a){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,uid:Math.floor(99999999*Math.random()),isDisabled:!1,
settings:{}}},_getInst:function(b){try{return a.data(b,"rating")}catch(c){throw"Missing instance data for this rating";}}};a.fn.zinoRating=function(b){var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&"isDisabled"==b||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.zinoRating["_"+b+"Rating"].apply(a.zinoRating,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.zinoRating["_"+b+"Rating"].apply(a.zinoRating,[this].concat(c)):a.zinoRating._attachRating(this,
b)})};a.zinoRating=new t;a.zinoRating.version="1.5"})(jQuery);
