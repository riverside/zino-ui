!function(p,z){"use strict";var b="rating",v=!1;function t(){this._defaults={items:[],disabled:v,select:null,focus:null,blur:null,create:null}}t.prototype={_attachRating:function(i,t){if(this._getInst(i))return v;var e,n,s,a=p(i),r=this,l=r._newInst(a);switch(p.extend(l.settings,r._defaults,t),i.disabled!==z&&!0===i.disabled&&(l.settings.disabled=!0),i.nodeName){case"INPUT":if("range"===i.type){a.hide();var u=parseFloat(a.attr("min")),g=parseFloat(a.attr("max")),d=parseFloat(a.attr("value")),o=0,c=p("<span>").addClass("zui-rating");for(f=u;f<=g;f+=1)n=p("<a>",{href:"#",title:f,"data-label":f,"data-value":f}).addClass("zui-rating-star").append("<span></span>"),d!==z&&0===o&&(n.addClass("zui-rating-star-selected"),d===f)&&(o=1),n.appendTo(c);c.insertAfter(a)}break;case"SELECT":a.hide(),c=p("<span>").addClass("zui-rating"),d=p("option:selected",a).val(),o=0,p("option",a).each(function(t,a){e=p(a),s=e.val(),n=p("<a>",{href:"#",title:e.text(),"data-label":e.text(),"data-value":s}).addClass("zui-rating-star").append("<span></span>"),""!==d&&0===o&&(n.addClass("zui-rating-star-selected"),d===s)&&(o=1),n.appendTo(c)}),c.insertAfter(a);break;default:c=a.addClass("zui-rating zui-rating-custom"),d=-1;for(var f=o=0,h=l.settings.items.length;f<h;f++)if(l.settings.items[f].checked){d=f;break}for(f=0,h=l.settings.items.length;f<h;f++)n=p("<a>",{href:"#",title:l.settings.items[f].label,"data-label":l.settings.items[f].label,"data-value":l.settings.items[f].value}).addClass("zui-rating-star").append("<span></span>"),0<=d&&0===o&&(n.addClass("zui-rating-star-selected"),d===f)&&(o=1),n.appendTo(c)}c&&(l.settings.disabled&&p(".zui-rating-star",c).addClass("zui-rating-star-disabled"),c.on("click",".zui-rating-star",function(t){return t&&t.preventDefault&&t.preventDefault(),l.settings.disabled||r._selectRating.call(r,i,this),v}).on("mouseenter",".zui-rating-star",function(t){l.settings.disabled||r._focusRating.call(r,i,this)}).on("mouseleave",".zui-rating-star",function(t){l.settings.disabled||r._blurRating.call(r,i,this)}),a.bind("ratingcreate",function(t,a){null!==l.settings.create&&l.settings.create.call(i,t,a)}).bind("ratingselect",function(t,a){null!==l.settings.select&&l.settings.select.call(i,t,a)}).bind("ratingfocus",function(t,a){null!==l.settings.focus&&l.settings.focus.call(i,t,a)}).bind("ratingblur",function(t,a){null!==l.settings.blur&&l.settings.blur.call(i,t,a)}),l.holder=c.get(0)),p(i).trigger("ratingcreate",{}),p.data(i,b,l)},_focusRating:function(t,a){var i=this._getInst(t);if(!i)return v;var e=p(a),n=p(".zui-rating-star",i.holder).index(a);p(".zui-rating-star",i.holder).filter(":gt("+n+")").removeClass("zui-rating-star-focus").end().filter(":lt("+(n+1)+")").addClass("zui-rating-star-focus"),p(t).trigger("ratingfocus",{input:a,index:n,value:e.data("value"),label:e.data("label")})},_blurRating:function(t){var a=this._getInst(t);if(!a)return v;p(".zui-rating-star",a.holder).removeClass("zui-rating-star-focus"),p(t).trigger("ratingblur",{})},_selectRating:function(t,a){var i=this._getInst(t);if(!i)return v;var e=p(a),n=p(".zui-rating-star",i.holder).index(a);p(".zui-rating-star",i.holder).removeClass("zui-rating-star-focus zui-rating-star-selected").filter(":lt("+(n+1)+")").addClass("zui-rating-star-selected"),p(t).trigger("ratingselect",{input:a,index:n,value:e.data("value"),label:e.data("label")})},_enableRating:function(t){var a=this._getInst(t);if(!a)return v;p(".zui-rating-star",a.holder).removeClass("zui-rating-star-disabled"),a.settings.disabled=v,p.data(t,b,a)},_disableRating:function(t){var a=this._getInst(t);if(!a)return v;p(".zui-rating-star",a.holder).addClass("zui-rating-star-disabled"),a.settings.disabled=!0,p.data(t,b,a)},_destroyRating:function(t){var a=this._getInst(t),i=p(t);if(!a)return v;a=p(a.holder);(a.hasClass("zui-rating-custom")?(a.removeClass("zui-rating zui-rating-custom"),p("zui-rating-star",a)):a).remove(),i.is(":visible")||i.show(),p.data(t,b,v)},_newInst:function(t){return{id:t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:t,uid:Math.floor(99999999*Math.random()),isDisabled:v,settings:{}}},_getInst:function(t){try{return p.data(t,b)}catch(t){throw"Missing instance data for this rating"}}},p.fn.zinoRating=function(t){var a=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&"isDisabled"===t||"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?p.zinoRating["_"+t+"Rating"].apply(p.zinoRating,[this[0]].concat(a)):this.each(function(){"string"==typeof t?p.zinoRating["_"+t+"Rating"].apply(p.zinoRating,[this].concat(a)):p.zinoRating._attachRating(this,t)})},p.zinoRating=new t,p.zinoRating.version="1.5"}(jQuery);