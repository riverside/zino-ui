!function(z,_){"use strict";var a="chart",L=!1;function W(t,e,s,i){i=i*Math.PI/180;return[t+s*Math.cos(i),e+s*Math.sin(i)]}function I(){this._defaults={plugin:"svg",type:"line",variation:null,points:!1,stacking:!1,progression:"forward",legend:!0,tooltip:{color:"#fff",fill:"#000",radius:"2px",opacity:1,offset:{x:15,y:15},pattern:"%label, %value (%percent)"},series:[],lineRowColor:"#ccc",axisColor:"#444",textColor:"#444",fontSize:"12px",fontFamily:"Arial",radius:75,innerRadius:50,width:530,height:320},this.points=[],this.over=!1,this.tooltip={}}I.getWebsafeColors=function(){for(var t,e,s=[],i=["00","33","66","99","CC","FF"],n=0;n<6;n++)for(t=0;t<6;t++)for(e=0;e<6;e++)s.push(["#",i[n],i[t],i[e]].join(""));return s},I.colorLuminance=function(t,e){(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;for(var s,i="#",n=0;n<3;n++)s=parseInt(t.substr(2*n,2),16),i+=("00"+(s=Math.round(Math.min(Math.max(0,s+s*e),255)).toString(16))).substr(s.length);return i},I.getColors=function(t){var e=["#3366CC","#DC3912","#067A06","#FFCC00","#663300","#660066","#3399CC","#CC6600","#CC3399","#CC6666","#339900","#CC99FF","#CC3300","#99FF66","#993366","#16448A"];return t!==_&&e[t]!==_?e[t]:e},I.hexToRgb=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,s,i){return e+e+s+s+i+i});t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},I.prototype={_attachChart:function(t,e){if(this._getInst(t))return L;var s=z(t),i=this._newInst(s);if(this.tooltip[i.uid]={},z.extend(i.settings,this._defaults,e),-1===z.inArray(i.settings.plugin,["svg","canvas"]))throw Error("Ivalid value of 'plugin'. Supported values are: 'svg' and 'canvas'.");switch(s.addClass("zui-chart zui-chart-"+i.settings.type),i.settings.paddingTop=Math.floor(10*i.settings.height/100),i.settings.paddingBottom=Math.floor(10*i.settings.height/100),i.settings.paddingLeft=Math.floor(10*i.settings.width/100),i.settings.paddingRight=i.settings.legend?Math.floor(20*i.settings.width/100):0,"pie"===i.settings.type&&"multi-level"===i.settings.variation&&i.settings.legend&&-1!==z.inArray(i.settings.legend,[!0,1,2])&&(i.settings.paddingRight=0),i.settings.canvasWidth=i.settings.width-i.settings.paddingLeft-(-1===z.inArray(i.settings.type,["ohlc","candlestick","spline","scatter","bubble"])?i.settings.paddingRight:0),i.settings.canvasHeight=i.settings.height-i.settings.paddingTop-i.settings.paddingBottom,i.settings.type){case"line":case"area":case"bar":case"column":case"stepline":case"spline":case"bubble":case"scatter":i.settings.blockNum=i.settings.series[0].data.length;break;default:i.settings.blockNum=i.settings.series.length-(-1===z.inArray(i.settings.type,["ohlc","candlestick"])?1:0)}switch(i.settings.blockWidth=i.settings.canvasWidth/i.settings.blockNum,i.settings.blockHeight=i.settings.canvasHeight/i.settings.blockNum,i.settings.plugin){case"canvas":i.handle=zino.Canvas({target:t,width:i.settings.width,height:i.settings.height});break;case"svg":i.handle=zino.Svg({target:t,width:i.settings.width,height:i.settings.height}),i.handle.desc("Created with Zino UI "+z.zinoChart.version);var n=i.handle.clipPath("zinoui-"+i.uid).getShape();i.handle.rect(i.settings.paddingLeft,i.settings.paddingTop,0,0,i.settings.canvasWidth,i.settings.canvasHeight,!1).attr({fill:"none"}).appendTo(n)}z.data(t,a,i),this.draw.call(this,t)},draw:function(t){var e=this._getInst(t);if(!e)return L;switch(e.settings.plugin){case"canvas":e.handle.attr({fillStyle:"#FFFFFF"}).begin().rect(0,0,e.settings.width,e.settings.height).fill();break;case"svg":e.handle.rect(0,0,0,0,e.settings.width,e.settings.height).attr({fill:"#FFFFFF",stroke:"none","stroke-width":0}).insert()}switch(e.settings.type){case"pie":this.pie.call(this,t);break;case"donut":this.donut.call(this,t);break;case"bar":this.bar.call(this,t);break;case"column":this.column.call(this,t);break;case"stepline":this.stepline.call(this,t);break;case"line":this.line.call(this,t);break;case"area":this.area.call(this,t);break;case"polar":this.polar.call(this,t);break;case"radar":this.radar.call(this,t);break;case"rose":this.rose.call(this,t);break;case"candlestick":this.candlestick.call(this,t);break;case"ohlc":this.ohlc.call(this,t);break;case"spline":this.spline.call(this,t);break;case"scatter":this.scatter.call(this,t);break;case"bubble":this.bubble.call(this,t);break;case"gauge":this.gauge.call(this,t)}},_hideLabelsChart:function(t){if(!this._getInst(t))return L;z(t).find(".zui-chart-labels").remove()},_showLabelsChart:function(t){var e=this._getInst(t);if(!e)return L;var s,i,n,a,l=0,r=0,o=Math.floor((e.settings.width-e.settings.paddingRight)/2),g=Math.floor(e.settings.height/2);for("svg"===e.settings.plugin&&(a=e.handle.g().attr({class:"zui-chart-labels"}).getShape()),s=0,i=e.settings.series.length;s<i;s++)r+=e.settings.series[s].value;for(s=0,i=e.settings.series.length;s<i;s++){switch(n=e.settings.series[s].value/r*360+l,e.settings.plugin){case"canvas":e.handle.attr({font:e.settings.fontSize+" "+e.settings.fontFamily,textAlign:"center",textBaseline:"middle",fillStyle:e.settings.textColor}).text(e.settings.series[s].value,o+(e.settings.radius+20)*Math.cos(-(l+n)/2*Math.PI/180),g+(e.settings.radius+20)*Math.sin(-(l+n)/2*Math.PI/180));break;case"svg":e.handle.text(o+(e.settings.radius+20)*Math.cos(-(l+n)/2*Math.PI/180),g+(e.settings.radius+20)*Math.sin(-(l+n)/2*Math.PI/180),e.settings.series[s].value,!1).attr({fill:e.settings.textColor,"font-family":e.settings.fontFamily,"font-size":e.settings.fontSize,"text-anchor":"middle"}).appendTo(a)}l=n}},_hideLegendChart:function(t){if(!this._getInst(t))return L;z(t).find(".zui-chart-legend").remove()},_showLegendChart:function(t){var e=this._getInst(t);if(!e)return L;var s,i,n,a,l,r=I.getColors();switch("svg"===e.settings.plugin&&(a=e.handle.g().attr({class:"zui-chart-legend"}).getShape()),e.settings.type){case"stepline":i=e.settings.series[0].length,n=1;break;case"pie":case"donut":case"line":case"area":case"bar":case"column":case"polar":case"radar":case"rose":i=e.settings.series.length,n=2}for(s=0;s<i;s++)"canvas"===e.settings.plugin?(e.handle.attr({fillStyle:e.settings.series[s].color||r[s]}).fillRect(e.settings.width-e.settings.paddingRight+10,e.settings.paddingTop+15*s,12,12),e.handle.attr({font:e.settings.fontSize+" "+e.settings.fontFamily,textAlign:"left",textBaseline:"top",fillStyle:e.settings.textColor,strokeStyle:"transparent"}).text(1===n?e.settings.series[0][s]:e.settings.series[s].label,e.settings.width-e.settings.paddingRight+10+15,e.settings.paddingTop+15*s)):(e.handle.rect(e.settings.width-e.settings.paddingRight+10,e.settings.paddingTop+15*s,0,0,12,12,!1).attr({fill:e.settings.series[s].color||r[s],stroke:"none","stroke-width":0}).appendTo(a),l=e.handle.factory("text",!1).attr({x:e.settings.width-e.settings.paddingRight+10+15,y:e.settings.paddingTop+15*s,"font-family":e.settings.fontFamily,"font-size":e.settings.fontSize,"text-anchor":"start"}).appendTo(a).getShape(),l=e.handle.factory("tspan",!1).attr({"alignment-baseline":"text-before-edge"}).appendTo(l).getShape(),e.handle.textNode(1===n?e.settings.series[0][s]:e.settings.series[s].label,!1).appendTo(l))},pie:function(i){var v=this._getInst(i);if(!v)return L;var t,b,e,y,s=[],k=0,n=0,m=Math.floor((v.settings.width-v.settings.paddingRight)/2),x=Math.floor(v.settings.height/2),S=I.getColors();if("svg"===v.settings.plugin)for(y=v.handle.g().attr({class:"zui-chart-canvas"}).getShape(),l=0,t=v.settings.series.length;l<t;l++)s[l]=v.handle.radialGradient(m,x,v.settings.radius).attr({id:"radial-"+l,gradientUnits:"userSpaceOnUse"}).getShape(),v.handle.factory("stop",!1).attr({offset:"0","stop-color":v.settings.series[l].color!==_?v.settings.series[l].color:S[l]}).appendTo(s[l]),v.handle.factory("stop",!1).attr({offset:"1","stop-color":I.colorLuminance(v.settings.series[l].color!==_?v.settings.series[l].color:S[l],-.3)}).appendTo(s[l]);else if("canvas"===v.settings.plugin)for(l=0,t=v.settings.series.length;l<t;l++)s[l]=v.handle.radialGradient(m,x,.9*v.settings.radius,m,x,v.settings.radius-v.settings.radius),s[l].addColorStop(0,v.settings.series[l].color!==_?v.settings.series[l].color:S[l]),s[l].addColorStop(1,I.colorLuminance(v.settings.series[l].color!==_?v.settings.series[l].color:S[l],-.3));var F=0,M=0,T=0,w=[];if("multi-level"===v.settings.variation){v.settings.legend&&"svg"===v.settings.plugin&&(C=v.handle.g().attr({class:"zui-chart-legend"}).getShape()),!function t(e){e.category&&(F+=1,t(e.category[0]))}(v.settings.series[0]),!function t(e,s){w[s]||(w[s]=0);for(var i=0,n=e.length;i<n;i++)w[s]+=parseFloat(e[i].value),T+=1,e[i].category&&t(e[i].category,s+1)}(v.settings.series,0);for(var C,a=v.settings.radius/(F+1),l=0;l<F;l++)if(0<l)!function t(e,s,i){if(!(T-1<=M))for(var n,a,l,r,o,g,h,d,c=v.settings.radius/(F+1)*(s+1),p=v.settings.radius/(F+1)*s,u=0,f=e.length;u<f;u++){if(n=parseFloat(e[u].value)/w[s]*360+i,k=W(m,x,c,-i),b=W(m,x,c,-n),g=W(m,x,p,-i),h=W(m,x,p,-n),"canvas"===v.settings.plugin?v.handle.attr({fillStyle:e[u].color,strokeStyle:"#fff",lineWidth:2}).begin().moveTo(h[0],h[1]).lineTo(b[0],b[1]).arc(m,x,c,n*Math.PI/180,i*Math.PI/180,!0).lineTo(k[0],k[1]).lineTo(g[0],g[1]).arc(m,x,p,i*Math.PI/180,n*Math.PI/180,!1).close().fill().stroke():v.handle.rose(k[0],k[1],c,b[0],b[1],h[0],h[1],p,g[0],g[1],!1).attr({fill:e[u].color,stroke:"#fff","stroke-width":2,class:e[u].label}).appendTo(y),v.settings.legend)if(g=W(m,x,c,-(h=(n+i)/2)),h=W(m,x,p,-h),r=((g[0]+h[0])/2).toFixed(2),o=((g[1]+h[1])/2).toFixed(2),"canvas"===v.settings.plugin)switch(v.settings.legend){case 3:case 4:v.handle.attr({fillStyle:e[u].color||S[u]}).fillRect(v.settings.width-v.settings.paddingRight+10,v.settings.paddingTop+15*M,12,12),d=e[u].label,4===v.settings.legend&&(d+=": "+e[u].value),v.handle.attr({font:v.settings.fontSize+" "+v.settings.fontFamily,textAlign:"left",textBaseline:"top",fillStyle:v.settings.textColor,strokeStyle:"transparent"}).text(d,v.settings.width-v.settings.paddingRight+10+15,v.settings.paddingTop+15*M);break;default:d=e[u].label,2===v.settings.legend&&(d+=": "+e[u].value),v.handle.attr({font:"9px "+v.settings.fontFamily,textAlign:"center",textBaseline:"middle",fillStyle:v.settings.textColor,strokeStyle:"transparent"}).transform(1,0,0,1,r,o).text(d,0,0).resetTransform()}else switch(v.settings.legend){case 3:case 4:v.handle.rect(v.settings.width-v.settings.paddingRight+10,v.settings.paddingTop+15*M,0,0,12,12,!1).attr({fill:e[u].color||S[u],stroke:"none","stroke-width":0}).appendTo(C),a=v.handle.factory("text",!1).attr({x:v.settings.width-v.settings.paddingRight+10+15,y:v.settings.paddingTop+15*M,"font-family":v.settings.fontFamily,"font-size":v.settings.fontSize,"text-anchor":"start"}).appendTo(C).getShape(),l=v.handle.factory("tspan",!1).attr({"alignment-baseline":"text-before-edge"}).appendTo(a).getShape(),d=e[u].label,4===v.settings.legend&&(d+=": "+e[u].value),v.handle.textNode(d,!1).appendTo(l);break;default:a=v.handle.factory("text",!1).attr({x:0,y:0,transform:"matrix(1,0,0,1,"+r+","+o+")",fill:v.settings.textColor,"font-family":v.settings.fontFamily,"font-size":"9px","text-anchor":"middle"}).appendTo(C).getShape(),l=v.handle.factory("tspan",!1).attr({"alignment-baseline":"middle"}).appendTo(a).getShape(),d=e[u].label,2===v.settings.legend&&(d+=": "+e[u].value),v.handle.textNode(d,!1).appendTo(l)}M+=1,e[u].category&&s+1<=F&&t(e[u].category,s+1,i),i=n}}(v.settings.series[0].category,l,0);else if("canvas"===v.settings.plugin?v.handle.attr({fillStyle:v.settings.series[0].color,strokeStyle:"#fff",lineWidth:2}).begin().circle(m,x,a).close().fill().stroke():v.handle.circle(m,x,a,!1).attr({fill:v.settings.series[0].color}).appendTo(y),v.settings.legend)if("canvas"===v.settings.plugin)switch(v.settings.legend){case 3:case 4:break;default:v.handle.attr({font:"9px "+v.settings.fontFamily,textAlign:"center",textBaseline:"middle",fillStyle:v.settings.textColor,strokeStyle:"transparent"}).transform(1,0,0,1,m,x).text(v.settings.series[0].label,0,0).resetTransform()}else switch(v.settings.legend){case 3:case 4:break;default:var r=v.handle.factory("text",!1).attr({x:0,y:0,transform:"matrix(1,0,0,1,"+m+","+x+")",fill:v.settings.textColor,"font-family":v.settings.fontFamily,"font-size":"9px","text-anchor":"middle"}).appendTo(C).getShape(),r=v.handle.factory("tspan",!1).attr({"alignment-baseline":"middle"}).appendTo(r).getShape();v.handle.textNode(v.settings.series[0].label,!1).appendTo(r)}}else{for(l=0,t=v.settings.series.length;l<t;l++)n+=v.settings.series[l].value;for(l=0,t=v.settings.series.length;l<t;l++)e=Math.floor(999999*Math.random()),b=v.settings.series[l].value/n*360+k,"canvas"===v.settings.plugin?v.handle.attr({lineWidth:2,fillStyle:s[l],strokeStyle:"#FFFFFF"}).sector(m,x,v.settings.radius,k,b):v.handle.sector(m,x,v.settings.radius,k.toFixed(2),b.toFixed(2),!1).attr({fill:"url(#radial-"+l+")",stroke:"#FFFFFF","stroke-width":2,"data-rel":"sector_"+e,"zui:tooltip":v.settings.tooltip&&v.settings.tooltip.pattern?v.settings.tooltip.pattern.replace("%label",v.settings.series[l].label).replace("%value",v.settings.series[l].value).replace("%percent",(v.settings.series[l].value/n*100).toFixed(1)+"%"):v.settings.series[l].label}).bind("click",function(s,i,n,a){return function(t,e){e=z(e),e=e.siblings("path[data-rel='arc_"+e.attr("data-rel").split("_")[1]+"']");0===e.length?v.handle.arc(m,x,v.settings.radius+3,s,i,!1).attr({fill:"none",stroke:n,"stroke-opacity":1,"stroke-width":3,"data-rel":"arc_"+a}).appendTo(y):e.remove()}}(k.toFixed(2),b.toFixed(2),v.settings.series[l].color!==_?v.settings.series[l].color:S[l],e)).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(y),k=b;this._tooltip.call(this,i),this._showLabelsChart.call(this,i),v.settings.legend&&this._showLegendChart.call(this,i)}},polar:function(t){var e=this._getInst(t);if(!e)return L;this.setCircumference.call(this,t);var s,i,n,a,l,r,o,g=[],h=Math.floor((e.settings.width-e.settings.paddingRight)/2),d=Math.floor(e.settings.height/2),c=this.getBounds2(t),p=360/e.settings.series[0].data.length,u=I.getColors();for("svg"===e.settings.plugin&&(r=e.handle.g().attr({class:"zui-chart-area"}).getShape(),o=e.handle.g().attr({class:"zui-chart-points"}).getShape()),i=e.settings.series[s=0].data.length;s<i;s++)for(v=0,b=e.settings.series.length;v<b;v++)n=h+(l=e.settings.series[v].data[s].value/c.yMax*e.settings.radius)*Math.cos((p*s-90)*Math.PI/180),a=d+l*Math.sin((p*s-90)*Math.PI/180),g[v]===_&&(g[v]=[]),0<s?g[v].push(["L",n,",",a].join("")):g[v].push(["M",n,",",a].join(""));if("scatter"!==e.settings.variation)for(var f,v=0,b=g.length;v<b;v++)"canvas"===e.settings.plugin?(f=I.hexToRgb(e.settings.series[v].color||u[v]),g[v].push(g[v][0]),e.handle.attr({fillStyle:"area"===e.settings.variation?["rgba("+f.r,f.g,f.b,"0.4)"].join(","):"none",strokeStyle:e.settings.series[v].color||u[v],lineWidth:2}).path(g[v].join(""))):(g[v].push("Z"),e.handle.path(g[v].join(""),!1).attr({fill:"area"===e.settings.variation?e.settings.series[v].color||u[v]:"none","fill-opacity":"area"===e.settings.variation?.4:1,stroke:e.settings.series[v].color||u[v],"stroke-width":2,style:"stroke-dasharray: 3000,3000"}).appendTo(r));for(i=e.settings.series[s=0].data.length;s<i;s++)for(v=0,b=e.settings.series.length;v<b;v++)n=h+(l=e.settings.series[v].data[s].value/c.yMax*e.settings.radius)*Math.cos((p*s-90)*Math.PI/180),a=d+l*Math.sin((p*s-90)*Math.PI/180),!e.settings.points&&"scatter"!==e.settings.variation||("canvas"===e.settings.plugin?e.handle.attr({fillStyle:"#FFFFFF",strokeStyle:e.settings.series[v].color||u[v],lineWidth:2}).begin().circle(n,a,3).close().fill().stroke():e.handle.circle(n,a,3,!1).attr({fill:"#FFFFFF",stroke:e.settings.series[v].color||u[v],"stroke-width":2}).appendTo(o));this.setCircumferenceLabels.call(this,t),e.settings.legend&&this._showLegendChart.call(this,t)},radar:function(t){var e=this._getInst(t);if(!e)return L;this.setCircumference.call(this,t);var s,i,n,a,l,r,o,g,h=[],d=Math.floor((e.settings.width-e.settings.paddingRight)/2),c=Math.floor(e.settings.height/2),p=this.getBounds2(t),u=360/e.settings.series[0].data.length,f=I.getColors();for("svg"===e.settings.plugin&&(o=e.handle.g().attr({class:"zui-chart-area"}).getShape()),i=e.settings.series[s=0].data.length;s<i;s++)for(n=0,a=e.settings.series.length;n<a;n++)l=d+(r=e.settings.series[n].data[s].value/p.yMax*e.settings.radius)*Math.cos((u*s-90)*Math.PI/180),r=c+r*Math.sin((u*s-90)*Math.PI/180),h[n]===_&&(h[n]=[]),0<s?h[n].push(["L",l,",",r].join("")):h[n].push(["M",l,",",r].join(""));for(n=0,a=h.length;n<a;n++)"canvas"===e.settings.plugin?(g=I.hexToRgb(e.settings.series[n].color||f[n]),h[n].push(h[n][0]),e.handle.attr({fillStyle:["rgba("+g.r,g.g,g.b,"0.4)"].join(","),strokeStyle:e.settings.series[n].color||f[n],lineWidth:1}).path(h[n].join(""))):(h[n].push("Z"),e.handle.path(h[n].join(""),!1).attr({fill:e.settings.series[n].color||f[n],"fill-opacity":.4,stroke:e.settings.series[n].color||f[n],"stroke-width":1}).appendTo(o));this.setCircumferenceLabels.call(this,t),e.settings.legend&&this._showLegendChart.call(this,t)},rose:function(i){var t=this._getInst(i);if(!t)return L;this.setCircumference.call(this,i);var e,s,n,a,l,r,o,g,h,d,c,p,u,f,v,b=0,y=[],k=[],m=Math.floor((t.settings.width-t.settings.paddingRight)/2),x=Math.floor(t.settings.height/2),S=this.getBounds2(i),F=360/t.settings.series[0].data.length,M=I.getColors();if("svg"===t.settings.plugin)for(r=t.handle.g().attr({class:"zui-chart-area"}).getShape(),t.handle.g().attr({class:"zui-chart-area222"}).getShape(),e=0,s=t.settings.series.length;e<s;e++)y[e]=t.handle.radialGradient(m,x,t.settings.radius).attr({id:"radial-"+e,gradientUnits:"userSpaceOnUse"}).getShape(),t.handle.factory("stop",!1).attr({offset:"0","stop-color":t.settings.series[e].color!==_?t.settings.series[e].color:M[e]}).appendTo(y[e]),t.handle.factory("stop",!1).attr({offset:"1","stop-color":I.colorLuminance(t.settings.series[e].color!==_?t.settings.series[e].color:M[e],-.3)}).appendTo(y[e]);for(s=t.settings.series[e=0].data.length;e<s;e++)for(n=k[e]=0,a=t.settings.series.length;n<a;n++)k[e]+=t.settings.series[n].data[e].value;switch(t.settings.stacking){case"normal":case"percent":b=Math.max.apply(Math,k)}for(s=t.settings.series[e=0].data.length;e<s;e++)for(n=p=0,a=t.settings.series.length;n<a;n++)if(t.settings.stacking){switch(t.settings.stacking){case"normal":d=t.settings.series[n].data[e].value/b,l=t.settings.radius*(d+p),p+=d;break;case"percent":d=t.settings.series[n].data[e].value/k[e],l=t.settings.radius*(d+p),p+=d}g=(o=F*e-90)+F,g-=c=Math.abs(o-g)/4,c=W(m,x,l,-(o+=c)),h=W(m,x,l,-g),0<n?"canvas"===t.settings.plugin?t.handle.attr({fillStyle:M[n]}).begin().moveTo(f[0],f[1]).lineTo(h[0],h[1]).arc(m,x,l,o*Math.PI/180,g*Math.PI/180,!1).lineTo(c[0],c[1]).lineTo(u[0],u[1]).arc(m,x,v,o*Math.PI/180,g*Math.PI/180,!1).close().stroke().fill():t.handle.rose(c[0],c[1],l,h[0],h[1],f[0],f[1],v,u[0],u[1],!1).attr({fill:"url(#radial-"+n+")","zui:tooltip":t.settings.tooltip&&t.settings.tooltip.pattern?t.settings.tooltip.pattern.replace("%label",t.settings.series[n].label).replace("%value",t.settings.series[n].data[e].value).replace("%percent",(t.settings.series[n].data[e].value/k[e]*100).toFixed(1)+"%"):t.settings.series[e].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(r):"canvas"===t.settings.plugin?t.handle.attr({fillStyle:M[n]}).sector(m,x,l,o,g):t.handle.rose(c[0],c[1],l,h[0],h[1],m,x,0,m,x,!1).attr({fill:"url(#radial-"+n+")","zui:tooltip":t.settings.tooltip&&t.settings.tooltip.pattern?t.settings.tooltip.pattern.replace("%label",t.settings.series[n].label).replace("%value",t.settings.series[n].data[e].value).replace("%percent",(t.settings.series[n].data[e].value/k[e]*100).toFixed(1)+"%"):t.settings.series[e].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(r),u=c,f=h,v=l}else l=t.settings.series[n].data[e].value/S.yMax*t.settings.radius,o=F*e-90+F/a*(n-1),g=F*e-90+F/a*n,"canvas"===t.settings.plugin?t.handle.attr({fillStyle:M[n]}).sector(m,x,l,o,g):t.handle.sector(m,x,l,o,g,!1).attr({fill:"url(#radial-"+n+")","zui:tooltip":t.settings.tooltip&&t.settings.tooltip.pattern?t.settings.tooltip.pattern.replace("%label",t.settings.series[n].label).replace("%value",t.settings.series[n].data[e].value).replace("%percent",(t.settings.series[n].data[e].value/k[e]*100).toFixed(1)+"%"):t.settings.series[e].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(r);this._tooltip.call(this,i),this.setCircumferenceLabels.call(this,i),t.settings.legend&&this._showLegendChart.call(this,i)},donut:function(i){var l=this._getInst(i);if(!l)return L;var t,e,s,n,r,a,o,g,h,d=l.settings.innerRadius,c=l.settings.radius,p=[],u=0,f=0,v=Math.floor((l.settings.width-l.settings.paddingRight)/2),b=Math.floor(l.settings.height/2),y=I.getColors();if("svg"===l.settings.plugin)for(r=l.handle.g().attr({class:"zui-chart-canvas"}).getShape(),t=0,e=l.settings.series.length;t<e;t++)p[t]=l.handle.radialGradient(v,b,l.settings.radius).attr({id:"radial-"+t,gradientUnits:"userSpaceOnUse"}).getShape(),l.handle.factory("stop",!1).attr({offset:"0","stop-color":l.settings.series[t].color!==_?l.settings.series[t].color:y[t]}).appendTo(p[t]),l.handle.factory("stop",!1).attr({offset:"1","stop-color":I.colorLuminance(l.settings.series[t].color!==_?l.settings.series[t].color:y[t],-.3)}).appendTo(p[t]);else if("canvas"===l.settings.plugin)for(t=0,e=l.settings.series.length;t<e;t++)p[t]=l.handle.radialGradient(v,b,.9*l.settings.radius,v,b,l.settings.radius-l.settings.radius),p[t].addColorStop(0,l.settings.series[t].color!==_?l.settings.series[t].color:y[t]),p[t].addColorStop(1,I.colorLuminance(l.settings.series[t].color!==_?l.settings.series[t].color:y[t],-.3));for(t=0,e=l.settings.series.length;t<e;t++)f+=l.settings.series[t].value;for(t=0,e=l.settings.series.length;t<e;t++)n=Math.floor(999999*Math.random()),s=l.settings.series[t].value/f*360+u,"canvas"===l.settings.plugin?(a=W(v,b,d,-u),o=W(v,b,d,-s),g=W(v,b,c,-u),h=W(v,b,c,-s),l.handle.attr({lineWidth:2,fillStyle:p[t],strokeStyle:"#FFFFFF"}).begin().moveTo(h[0],h[1]).lineTo(o[0],o[1]).arc(v,b,d,s*Math.PI/180,u*Math.PI/180,!0).lineTo(a[0],a[1]).lineTo(g[0],g[1]).arc(v,b,c,u*Math.PI/180,s*Math.PI/180,!1).close().fill().stroke()):(a=W(v,b,d,-u),o=W(v,b,d,-s),g=W(v,b,c,-u),h=W(v,b,c,-s),l.handle.rose(a[0],a[1],d,o[0],o[1],h[0],h[1],c,g[0],g[1],!1).attr({fill:"url(#radial-"+t+")",stroke:"#FFFFFF","stroke-width":2,"data-rel":"sector_"+n,"zui:tooltip":l.settings.tooltip&&l.settings.tooltip.pattern?l.settings.tooltip.pattern.replace("%label",l.settings.series[t].label).replace("%value",l.settings.series[t].value).replace("%percent",(l.settings.series[t].value/f*100).toFixed(1)+"%"):l.settings.series[t].label}).bind("click",function(s,i,n,a){return function(t,e){e=z(e),e=e.siblings("path[data-rel='arc_"+e.attr("data-rel").split("_")[1]+"']");0===e.length?l.handle.arc(v,b,l.settings.radius+3,s,i,!1).attr({fill:"none",stroke:n,"stroke-opacity":1,"stroke-width":3,"data-rel":"arc_"+a}).appendTo(r):e.remove()}}(u.toFixed(2),s.toFixed(2),l.settings.series[t].color!==_?l.settings.series[t].color:y[t],n)).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(r)),u=s;this._tooltip.call(this,i),this._showLabelsChart.call(this,i),l.settings.legend&&this._showLegendChart.call(this,i)},_lineArea:function(i){var t=this._getInst(i);if(!t)return L;this.setPlot.call(this,i),t.settings.legend&&this._showLegendChart.call(this,i);var e,s,n,a,l,r,o,g,h,d,c,p=[],u=I.getColors();for("svg"===t.settings.plugin&&("area"===t.settings.type&&(c=t.handle.g().attr({class:"zui-chart-plot"}).getShape()),d=t.handle.g().attr({class:"zui-chart-canvas","clip-path":"url(#zinoui-"+t.uid+")"}).getShape()),s=t.settings.series[e=0].data.length;e<s;e++)for(n=p[e]=0,a=t.settings.series.length;n<a;n++)p[e]+=t.settings.series[n].data[e].value;for(e=0,s=t.settings.series.length;e<s;e++){for(l=t.settings.paddingLeft+t.settings.blockWidth/2,o=[],g=[],n=0,a=t.settings.series[e].data.length;n<a;n++)r=t.settings.paddingLeft+t.settings.blockWidth*n+t.settings.blockWidth/2,h=this.getY(i,t.settings.series[e].data[n].value),0===n?(o.push("M"+l+","+h),g.push("M"+l+","+h)):(o.push("L"+r+","+h),g.push("L"+r+","+h)),this.points.push({x:r,y:h,radius:3,color:t.settings.series[e].color||u[e],name:t.settings.categories[0].category[n].label,data:t.settings.series[e].data[n].value});var f=I.hexToRgb(t.settings.series[e].color||u[e]);"area"===t.settings.type&&(g.push("L"+r+","+(t.settings.height-t.settings.paddingBottom)),g.push("L"+l+","+(t.settings.height-t.settings.paddingBottom)),"canvas"===t.settings.plugin?t.handle.attr({fillStyle:["rgba("+f.r,f.g,f.b,"0.3)"].join(","),strokeStyle:"transparent"}).path(g.join("")):(g.push("Z"),t.handle.path(g.join(""),!1).attr({fill:t.settings.series[e].color||u[e],"fill-opacity":.3,stroke:"none","stroke-width":0}).appendTo(c))),"canvas"===t.settings.plugin?t.handle.attr({fillStyle:"transparent",strokeStyle:t.settings.series[e].color||u[e],lineWidth:2}).path(o.join("")):t.handle.path(o.join(""),!1).attr({fill:"none","fill-opacity":1,stroke:t.settings.series[e].color||u[e],"stroke-width":2,style:"stroke-dasharray: 3000,3000"}).appendTo(d)}for(e=0,s=t.settings.series.length;e<s;e++)for(n=0,a=t.settings.series[e].data.length;n<a;n++)r=t.settings.paddingLeft+t.settings.blockWidth*n+t.settings.blockWidth/2,h=this.getY(i,t.settings.series[e].data[n].value),"canvas"===t.settings.plugin?t.handle.attr({fillStyle:"#FFFFFF",strokeStyle:t.settings.series[e].color||u[e],lineWidth:2}).begin().circle(r,h,4).close().fill().stroke():t.handle.circle(r,h,4,!1).attr({fill:"#FFFFFF",stroke:t.settings.series[e].color||u[e],"stroke-width":2,"zui:tooltip":t.settings.tooltip&&t.settings.tooltip.pattern?t.settings.tooltip.pattern.replace("%label",t.settings.series[e].label).replace("%value",t.settings.series[e].data[n].value).replace("%percent",(t.settings.series[e].data[n].value/p[e]*100).toFixed(1)+"%"):t.settings.series[e].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(d);this._tooltip.call(this,i)},line:function(t){this._lineArea.call(this,t)},area:function(t){this._lineArea.call(this,t)},bar:function(i){var t=this._getInst(i);if(!t)return L;this.setPlot.call(this,i),t.settings.legend&&this._showLegendChart.call(this,i);var e,s,n,a,l,r,o,g,h,d,c=[],p=0,u=[],f=t.settings.series.length,v=this.getXX(i,0),b=this.getBounds2(i).yMax,y=I.getColors();if("svg"===t.settings.plugin)for(l=t.handle.g().attr({class:"zui-chart-canvas","clip-path":"url(#zinoui-"+t.uid+")"}).getShape(),e=0,s=t.settings.series.length;e<s;e++)c[e]=t.handle.linearGradient("50%","0%","50%","100%").attr({id:"linear-"+e}).getShape(),t.handle.factory("stop",!1).attr({offset:"0%","stop-color":t.settings.series[e].color||y[e]}).appendTo(c[e]),t.handle.factory("stop",!1).attr({offset:"100%","stop-color":I.colorLuminance(t.settings.series[e].color||y[e],-.3)}).appendTo(c[e]);for(s=t.settings.series[e=0].data.length;e<s;e++)for(n=u[e]=0,a=t.settings.series.length;n<a;n++)u[e]+=t.settings.series[n].data[e].value;switch(t.settings.stacking){case"normal":case"percent":p=Math.max.apply(Math,u),g=t.settings.blockHeight/2;break;default:g=t.settings.blockHeight/2/f}for(s=t.settings.series[e=0].data.length;e<s;e++)for(n=d=0,a=t.settings.series.length;n<a;n++){switch(t.settings.stacking){case"normal":h=t.settings.series[n].data[e].value/p,o=t.settings.canvasWidth*h,v=d+t.settings.paddingLeft,r=t.settings.paddingTop+e*t.settings.blockHeight+(t.settings.blockHeight-g)/2,d+=o;break;case"percent":h=t.settings.series[n].data[e].value/u[e],o=t.settings.canvasWidth*h,v=d+t.settings.paddingLeft,r=t.settings.paddingTop+e*t.settings.blockHeight+(t.settings.blockHeight-g)/2,d+=o;break;default:o=t.settings.series[n].data[e].value/b*t.settings.canvasWidth,r=t.settings.paddingTop+e*t.settings.blockHeight+(g+2)*n+(t.settings.blockHeight-(g+2)*(a-1)+2)/2}"canvas"===t.settings.plugin?t.handle.attr({fillStyle:y[n]}).fillRect(v,r,o,g):t.handle.rect(v,r,0,0,o,g,!1).attr({fill:"url(#linear-"+n+")","zui:tooltip":t.settings.tooltip&&t.settings.tooltip.pattern?t.settings.tooltip.pattern.replace("%label",t.settings.series[n].label).replace("%value",t.settings.series[n].data[e].value).replace("%percent",(t.settings.series[n].data[e].value/u[e]*100).toFixed(1)+"%"):t.settings.series[n].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(l)}this._tooltip.call(this,i)},bubble:function(t){var e=this._getInst(t);if(!e)return L;this.setGrid.call(this,t),this.setAxis.call(this,t);var s,i,n,a,l,r,o,g,h,d,c,p=I.getColors(),u=this.getBounds2(t);for("svg"===e.settings.plugin?(h={fill:e.settings.textColor,"font-family":e.settings.fontFamily,"font-size":e.settings.fontSize,"text-anchor":"middle"},g=e.handle.g().attr({class:"zui-chart-labels zui-chart-labels-y"}).getShape(),o=e.handle.g().attr({class:"zui-chart-labels zui-chart-labels-x"}).getShape(),r=e.handle.g().attr({class:"zui-chart-circles"}).getShape()):"canvas"===e.settings.plugin&&(h={fillStyle:e.settings.textColor,font:e.settings.fontSize+" "+e.settings.fontFamily,strokeStyle:"transparent"}),e.settings.series.sort(function(t,e){return isNaN(parseFloat(t[1]))||!isFinite(t[1])||t[1]<e[1]?-1:t[1]>e[1]?1:0}),v=e.settings.categories[f=0].category.length;f<v;f++)"canvas"===e.settings.plugin?e.handle.attr(h).attr({textAlign:"center"}).text(e.settings.categories[0].category[f].label,e.settings.paddingLeft+e.settings.blockWidth*f+e.settings.blockWidth/2,e.settings.height-e.settings.paddingBottom+20):e.handle.text(e.settings.paddingLeft+e.settings.blockWidth*f+e.settings.blockWidth/2,e.settings.height-e.settings.paddingBottom+20,e.settings.categories[0].category[f].label,!1).attr(h).appendTo(o);for(f=0;f<=u.yMax;f+=Math.ceil(u.yMax/4))"canvas"===e.settings.plugin?e.handle.attr(h).attr({textBaseline:"middle",textAlign:"right"}).text(f,e.settings.paddingLeft-20,this.getYY(t,f)):(c=e.handle.factory("text",!1).attr(h).attr({x:e.settings.paddingLeft-10,y:this.getYY(t,f),"text-anchor":"end"}).appendTo(g).getShape(),c=e.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(c).getShape(),e.handle.textNode(f,!1).appendTo(c));u.xMin,u.xMax,u.yMin,u.yMax;for(var f=0,v=e.settings.series[0].data.length;f<v;f++)for(s=0,i=e.settings.series.length;s<i;s++)n=this.getX(t,e.settings.series[s].data[f].x),a=this.getY(t,e.settings.series[s].data[f].y),e.settings.series[s].data[f].z!==_&&(l=e.settings.series[s].data[f].z/u.zMax*20),"canvas"===e.settings.plugin?(d=I.hexToRgb(e.settings.series[s].color||p[s]),e.handle.attr({fillStyle:["rgba("+d.r,d.g,d.b,"0.4)"].join(",")}).begin().circle(n,a,l).fill()):e.handle.circle(n,a,l,!1).attr({fill:e.settings.series[s].color||p[s],"fill-opacity":.7,stroke:"none","stroke-width":0}).appendTo(r)},ohlc:function(i){var t=this._getInst(i);if(!t)return L;this.setPlot.call(this,i);t.settings.blockWidth;var e,s,n,a,l,r,o,g=I.getColors();this.getBounds(i);for("svg"===t.settings.plugin&&(r=t.handle.g().attr({class:"zui-chart-items","clip-path":"url(#zinoui-"+t.uid+")"}).getShape()),e=0,s=t.settings.series.length;e<s;e++)"svg"===t.settings.plugin&&(t.settings.tooltip.pattern="%label, open: %open, high: %high, low: %low, close: %close",o=t.handle.g(!1).attr({class:"zui-chart-item","zui:tooltip":t.settings.tooltip&&t.settings.tooltip.pattern?t.settings.tooltip.pattern.replace("%label",t.settings.series[e].label).replace("%open",t.settings.series[e].open).replace("%high",t.settings.series[e].high).replace("%low",t.settings.series[e].low).replace("%close",t.settings.series[e].close):t.settings.series[e].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(r).getShape()),t.settings.series[e].high,t.settings.series[e].low,n=t.settings.paddingLeft+e*t.settings.blockWidth+t.settings.blockWidth/2,a=this.getY(i,t.settings.series[e].high),l=this.getY(i,t.settings.series[e].low),"canvas"===t.settings.plugin?(t.handle.attr({strokeStyle:t.settings.series[e].color||g[0],lineWidth:2}).line(n+.5,a,n+.5,l),a=this.getY(i,t.settings.series[e].open),t.handle.line(n+1+.5,a,n-6+.5,a),l=this.getY(i,t.settings.series[e].close),t.handle.line(n-1+.5,l,n+6+.5,l)):(t.handle.line(n,a,n,l,!1).attr({"shape-rendering":"crispEdges",stroke:t.settings.series[e].color||g[0],"stroke-width":2}).appendTo(o),a=this.getY(i,t.settings.series[e].open),t.handle.line(n+1,a,n-6,a,!1).attr({"shape-rendering":"crispEdges",stroke:t.settings.series[e].color||g[0],"stroke-width":2}).appendTo(o),l=this.getY(i,t.settings.series[e].close),t.handle.line(n-1,l,n+6,l,!1).attr({"shape-rendering":"crispEdges",stroke:t.settings.series[e].color||g[0],"stroke-width":2}).appendTo(o));this._tooltip.call(this,i)},candlestick:function(i){var h=this._getInst(i);if(!h)return L;this.setPlot.call(this,i);var t,e,s,n,a,l,r,o,d,g=.55*h.settings.blockWidth,c=I.getColors(),p=this.getBounds(i);for("svg"===h.settings.plugin&&(o=h.handle.g().attr({class:"zui-chart-candles","clip-path":"url(#zinoui-"+h.uid+")"}).getShape()),t=0,e=h.settings.series.length;t<e;t++)"svg"===h.settings.plugin&&(h.settings.tooltip.pattern="%label, open: %open, high: %high, low: %low, close: %close",d=h.handle.g(!1).attr({class:"zui-chart-candle","zui:tooltip":h.settings.tooltip&&h.settings.tooltip.pattern?h.settings.tooltip.pattern.replace("%label",h.settings.series[t].label).replace("%open",h.settings.series[t].open).replace("%high",h.settings.series[t].high).replace("%low",h.settings.series[t].low).replace("%close",h.settings.series[t].close):h.settings.series[t].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(o).getShape()),s=h.settings.series[t].high<h.settings.series[t].low,r=n=h.settings.paddingLeft+t*h.settings.blockWidth+h.settings.blockWidth/2,a=h.settings.height-h.settings.paddingBottom-h.settings.canvasHeight*(h.settings.series[t].open/p.yMax),(l=h.settings.height-h.settings.paddingBottom-h.settings.canvasHeight*(h.settings.series[t].high/p.yMax))<a&&("canvas"===h.settings.plugin?h.handle.attr({strokeStyle:h.settings.series[t].color||c[0],lineWidth:2}).line(r+.5,a,n+.5,l):h.handle.line(r,a,n,l,!1).attr({"shape-rendering":"crispEdges",stroke:h.settings.series[t].color||c[0],"stroke-width":2}).appendTo(d)),r=n=h.settings.paddingLeft+t*h.settings.blockWidth+h.settings.blockWidth/2,a=h.settings.height-h.settings.paddingBottom-h.settings.canvasHeight*(h.settings.series[t].low/p.yMax),(l=h.settings.height-h.settings.paddingBottom-h.settings.canvasHeight*(h.settings.series[t].close/p.yMax))<a&&("canvas"===h.settings.plugin?h.handle.attr({strokeStyle:h.settings.series[t].color||c[0],lineWidth:2}).line(r+.5,a,n+.5,l):h.handle.line(r,a,n,l,!1).attr({"shape-rendering":"crispEdges",stroke:h.settings.series[t].color||c[0],"stroke-width":2}).appendTo(d)),r=Math.floor(99999*Math.random()),a=h.settings.paddingLeft+t*h.settings.blockWidth+(h.settings.blockWidth-g)/2,n=s?h.settings.height-h.settings.paddingBottom-h.settings.canvasHeight*(h.settings.series[t].low/p.yMax):h.settings.height-h.settings.paddingBottom-h.settings.canvasHeight*(h.settings.series[t].high/p.yMax),l=h.settings.canvasHeight*(Math.abs(h.settings.series[t].high-h.settings.series[t].low)/p.yMax),"canvas"===h.settings.plugin?h.handle.attr({fillStyle:s?h.settings.series[t].color||c[0]:"#FFFFFF",strokeStyle:h.settings.series[t].color||c[0],lineWidth:2,"data-rel":"rect_"+r}).begin().rect(a,n,g,l).fill().stroke():h.handle.rect(a,n,0,0,g,l,!1).attr({fill:s?h.settings.series[t].color||c[0]:"#FFFFFF","shape-rendering":"crispEdges",stroke:h.settings.series[t].color||c[0],"stroke-width":2,"data-rel":"rect_"+r}).bind("click",function(i,n,a,l,r,o,g){return function(t){var e=null,t=z(t).siblings("rect[data-rel^='inner_']"),s=t.length;0<s&&(e=t.attr("data-rel").split("_")[1],t.remove()),0!==s&&r==e||h.handle.rect(i+(g?1:2),n+(g?1:2),0,0,a-(g?2:4),l-(g?2:4),!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:o,"stroke-width":1,"data-rel":"inner_"+r}).appendTo(d)}}(a,n,g,l,r,s?"#FFFFFF":h.settings.series[t].color||c[0],s)).appendTo(d);this._tooltip.call(this,i)},column:function(i){var t=this._getInst(i);if(!t)return L;this.setPlot.call(this,i),t.settings.legend&&this._showLegendChart.call(this,i);var e,s,n,a,l,r,o,g,h,d,c,p=[],u=t.settings.series.length,f=0,v=[],b=this.getBounds2(i).yMax,y=I.getColors();if("svg"===t.settings.plugin)for(o=t.handle.g().attr({class:"zui-chart-canvas","clip-path":"url(#zinoui-"+t.uid+")"}).getShape(),e=0,s=t.settings.series.length;e<s;e++)p[e]=t.handle.linearGradient("0%","50%","100%","50%").attr({id:"linear-"+e}).getShape(),t.handle.factory("stop",!1).attr({offset:"0%","stop-color":t.settings.series[e].color||y[e]}).appendTo(p[e]),t.handle.factory("stop",!1).attr({offset:"100%","stop-color":I.colorLuminance(t.settings.series[e].color||y[e],-.3)}).appendTo(p[e]);for(s=t.settings.series[e=0].data.length;e<s;e++)for(n=v[e]=0,a=t.settings.series.length;n<a;n++)v[e]+=t.settings.series[n].data[e].value;switch(t.settings.stacking){case"normal":case"percent":f=Math.max.apply(Math,v),l=t.settings.blockWidth/2;break;default:l=t.settings.blockWidth/2/u}for(s=t.settings.series[e=0].data.length;e<s;e++)for(n=c=0,a=t.settings.series.length;n<a;n++){switch(t.settings.stacking){case"normal":d=t.settings.series[n].data[e].value/f,r=(t.settings.canvasHeight*d).toFixed(2),g=t.settings.paddingLeft+e*t.settings.blockWidth+(t.settings.blockWidth-l)/2,h=((1-d-c)*t.settings.canvasHeight+t.settings.paddingTop).toFixed(2),c+=d;break;case"percent":d=t.settings.series[n].data[e].value/v[e],r=(t.settings.canvasHeight*d).toFixed(2),g=t.settings.paddingLeft+e*t.settings.blockWidth+(t.settings.blockWidth-l)/2,h=((1-d-c)*t.settings.canvasHeight+t.settings.paddingTop).toFixed(2),c+=d;break;default:r=(t.settings.series[n].data[e].value/b*t.settings.canvasHeight).toFixed(2),g=t.settings.paddingLeft+e*t.settings.blockWidth+(l+2)*n+(t.settings.blockWidth-(l+2)*u+2)/2,h=(t.settings.height-t.settings.paddingTop-r).toFixed(2)}"canvas"===t.settings.plugin?t.handle.attr({fillStyle:t.settings.series[n].color||y[n]}).fillRect(g,h,l,r):t.handle.rect(g,h,0,0,l,r,!1).attr({fill:"url(#linear-"+n+")","zui:tooltip":t.settings.tooltip&&t.settings.tooltip.pattern?t.settings.tooltip.pattern.replace("%label",t.settings.series[n].label).replace("%value",t.settings.series[n].data[e].value).replace("%percent",(t.settings.series[n].data[e].value/v[e]*100).toFixed(1)+"%"):t.settings.series[n].label}).bind("mouseenter",function(s){return function(t,e){s._mouseenter.call(s,i,t,e)}}(this)).bind("mouseleave",function(s){return function(t,e){s._mouseleave.call(s,i,t,e)}}(this)).bind("mousemove",function(s){return function(t,e){s._mousemove.call(s,i,t,e)}}(this)).appendTo(o)}this._tooltip.call(this,i)},gauge:function(t){var e=this._getInst(t);if(!e)return L;var s,i,n,a,l,r=e.settings.width/2,o=e.settings.height/2,g=e.settings.radius,h=e.settings.radius+5,d=e.settings.radius+30;switch("svg"===e.settings.plugin&&(s=e.handle.g().attr({class:"zui-chart-canvas","clip-path":"url(#zinoui-"+e.uid+")"}).getShape()),e.settings.plugin){case"canvas":break;case"svg":e.handle.circle(r,o,g,!1).attr({fill:"red"}).appendTo(s),a=W(r,o,h,-0),l=W(r,o,h,-288),i=W(r,o,d,-0),n=W(r,o,d,-288),e.handle.rose(a[0],a[1],h,l[0],l[1],n[0],n[1],d,i[0],i[1],!1).attr({fill:"green"}).appendTo(s),a=e.handle.factory("text",{x:r,y:o},!1).attr({x:0,y:0,transform:"matrix(1,0,0,1,"+r+","+o+")",fill:e.settings.textColor,"font-family":e.settings.fontFamily,"font-size":e.settings.fontSize,"text-anchor":"middle"}).appendTo(s).getShape(),l=e.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(a).getShape(),e.handle.textNode("20%",!1).appendTo(l)}},getX:function(t,e){var s,i,n=this._getInst(t);return n?(i=(s=this.getBounds2(t)).xMax-s.xMin,s.xMin,(n.settings.width-n.settings.canvasWidth/this.getBounds2(t).xMax*e).toFixed(2)):L},getXX:function(t,e){var s=this._getInst(t);return s?(s.settings.canvasWidth/this.getBounds2(t).yMax*e+s.settings.paddingLeft).toFixed(2):L},getY:function(t,e){var s,i=this._getInst(t);return i?(s=(t=this.getBounds2(t)).yMax-t.yMin,e=e-t.yMin,(i.settings.height-i.settings.canvasHeight*(e/s)-i.settings.paddingBottom).toFixed(2)):L},getYY:function(t,e){var s=this._getInst(t);return s?parseFloat((s.settings.height-s.settings.canvasHeight/this.getBounds2(t).yMax*e-s.settings.paddingBottom).toFixed(2)):L},getBounds2:function(t){var e=this._getInst(t);if(!e)return L;var s,i,n,a,l=0,r=null,o=null,g=null,h=null,d=null,c=null;if(-1===z.inArray(e.settings.type,["candlestick","ohlc"])){for(a=l,s=e.settings.series.length;l<s;l++)for(i=0,n=e.settings.series[l].data.length;i<n;i++)h=l===a&&0===i?(g=e.settings.series[l].data[i].value,e.settings.series[l].data[i].value):(g=e.settings.series[l].data[i].value>g?e.settings.series[l].data[i].value:g,e.settings.series[l].data[i].value<h?e.settings.series[l].data[i].value:h);for(s=e.settings.categories[l=i=0].category.length;l<s;l++)o=0===l?(r=e.settings.categories[0].category[l].label,e.settings.categories[0].category[l].label):(r=e.settings.categories[0].category[l].label>r?e.settings.categories[0].category[l].label:r,e.settings.categories[0].category[l].label<o?e.settings.categories[0].category[l].label:o)}switch(e.settings.type){case"bubble":case"scatter":for(s=e.settings.series[l=0].data.length;l<s;l++)for(i=0,n=e.settings.series.length;i<n;i++)d=0===l&&0===i?(r=e.settings.series[i].data[l].x,o=e.settings.series[i].data[l].x,g=e.settings.series[i].data[l].y,h=e.settings.series[i].data[l].y,c=e.settings.series[i].data[l].z,e.settings.series[i].data[l].z):(r=e.settings.series[i].data[l].x>r?e.settings.series[i].data[l].x:r,o=e.settings.series[i].data[l].x<o?e.settings.series[i].data[l].x:o,g=e.settings.series[i].data[l].y>g?e.settings.series[i].data[l].y:g,h=e.settings.series[i].data[l].y<h?e.settings.series[i].data[l].y:h,c=e.settings.series[i].data[l].z>c?e.settings.series[i].data[l].z:c,e.settings.series[i].data[l].z<d?e.settings.series[i].data[l].z:d);break;case"candlestick":case"ohlc":for(i=l=0,s=e.settings.series.length;l<s;l++)for(var p in e.settings.series[l])e.settings.series[l].hasOwnProperty(p)&&-1!==z.inArray(p,["open","high","low","close"])&&(h=0===l&&0===i?(g=e.settings.series[l][p],e.settings.series[l][p]):(g=e.settings.series[l][p]>g?e.settings.series[l][p]:g,e.settings.series[l][p]<h?e.settings.series[l][p]:h),i++);for(l=0,s=e.settings.series.length;l<s;l++)o=0===l?(r=e.settings.series[l][0],e.settings.series[l][0]):(r=e.settings.series[l][0]>r?e.settings.series[l][0]:r,e.settings.series[l][0]<o?e.settings.series[l][0]:o);r=o=0}return{xMin:parseFloat(o),xMax:parseFloat(r),yMin:h,yMax:g,zMin:d,zMax:c}},getBounds:function(t){var e=this._getInst(t);if(!e)return L;for(var s,i,n,a=-1===z.inArray(e.settings.type,["ohlc","candlestick"])?1:0,l=null,r=null,o=null,g=null,h=a,d=e.settings.series.length;a<d;a++)switch(e.settings.type){case"bubble":g=1===a?(o=e.settings.series[a][2],e.settings.series[a][2]):(o=e.settings.series[a][2]>o?e.settings.series[a][2]:o,e.settings.series[a][2]<g?e.settings.series[a][2]:g);break;case"ohlc":case"candlestick":for(n in e.settings.series[a])e.settings.series[a].hasOwnProperty(n)&&-1!==z.inArray(n,["open","high","low","close"])&&(g=1===a?(o=e.settings.series[a][n],e.settings.series[a][n]):(o=e.settings.series[a][n]>o?e.settings.series[a][n]:o,e.settings.series[a][n]<g?e.settings.series[a][n]:g));break;default:for(s=1,i=e.settings.series[a].length;s<i;s++)g=a===h&&1===s?(o=e.settings.series[a][s],e.settings.series[a][s]):(o=e.settings.series[a][s]>o?e.settings.series[a][s]:o,e.settings.series[a][s]<g?e.settings.series[a][s]:g)}for(s="bubble"!==e.settings.type?0:1,a=1,d=e.settings.series.length;a<d;a++)r=1===a?(l=e.settings.series[a][s],e.settings.series[a][s]):(l=e.settings.series[a][s]>l?e.settings.series[a][s]:l,e.settings.series[a][s]<r?e.settings.series[a][s]:r);return{xMin:r,xMax:l,yMin:g,yMax:o}},setPlot:function(t){if(!this._getInst(t))return L;this.setGrid(t),this.setLabels(t),this.setAxis(t)},setGrid:function(t){var e=this._getInst(t);if(!e)return L;this.getBounds(t);var s,i,n,a,l,r,o,g,h,d=this.getBounds2(t);switch("svg"===e.settings.plugin&&(o=e.handle.g().attr({class:"zui-chart-grid"}).getShape(),g=e.handle.g().attr({class:"zui-chart-axis-x"}).getShape(),h=e.handle.g().attr({class:"zui-chart-axis-y"}).getShape()),e.settings.type){case"area":case"line":case"stepline":case"spline":case"column":case"candlestick":case"ohlc":case"scatter":case"bubble":for(-(s=1)!==z.inArray(e.settings.type,["ohlc","candlestick","line","area","column","stepline","spline","bubble","scatter"])&&(s=0),i=(-1!==z.inArray(e.settings.type,["line","area","column","stepline","spline","bubble","scatter"])?e.settings.series[0].data:e.settings.series).length,l=e.settings.height-e.settings.paddingBottom;s<=i;s++)n=-1===z.inArray(e.settings.type,["ohlc","candlestick","line","area","column","stepline","spline","bubble","scatter"])?s-1:s,r=e.settings.paddingLeft+e.settings.blockWidth*n,e.settings.blockWidth,"canvas"===e.settings.plugin?(e.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:e.settings.lineRowColor}).setLineDash([5,2]).line(r+.5,e.settings.paddingTop,r+.5,l).setLineDash([0]),e.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:e.settings.axisColor}).line(r+.5,l+1,r+.5,l+5)):(e.handle.line(r,e.settings.paddingTop,r,l,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:e.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(o),e.handle.line(r,l+1,r,l+5,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:e.settings.axisColor,"stroke-width":1}).appendTo(g));for("canvas"===e.settings.plugin?e.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:e.settings.lineRowColor}).setLineDash([5,2]).line(e.settings.paddingLeft,e.settings.paddingTop+.5,e.settings.paddingLeft+e.settings.canvasWidth,e.settings.paddingTop+.5).setLineDash([0]):e.handle.line(e.settings.paddingLeft,e.settings.paddingTop,e.settings.paddingLeft+e.settings.canvasWidth,e.settings.paddingTop,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:e.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(o),s=0,i=d.yMax;s<=i;s+=Math.ceil(i/4))l=this.getYY(t,s),"canvas"===e.settings.plugin?(e.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:e.settings.lineRowColor}).setLineDash([5,2]).line(e.settings.paddingLeft,l+.5,e.settings.paddingLeft+e.settings.canvasWidth,l+.5).setLineDash([0]),e.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:e.settings.axisColor}).line(e.settings.paddingLeft-4,l+.5,e.settings.paddingLeft,l+.5)):(e.handle.line(e.settings.paddingLeft,l,e.settings.paddingLeft+e.settings.canvasWidth,l,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:e.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(o),e.handle.line(e.settings.paddingLeft-4,l,e.settings.paddingLeft,l,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:e.settings.axisColor,"stroke-width":1}).appendTo(h));break;case"bar":for(s=0,n=1,i=d.yMax;n<=e.settings.blockNum;n++,s+=Math.ceil(i/e.settings.blockNum))l=e.settings.paddingTop+e.settings.blockHeight*s,"canvas"===e.settings.plugin?(e.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:e.settings.lineRowColor}).setLineDash([5,2]).line(e.settings.paddingLeft,l+.5,e.settings.paddingLeft+e.settings.canvasWidth,l+.5).setLineDash([0]),e.handle.attr({fillStyle:e.settings.axisColor,strokeStyle:"transparent"}).fillRect(e.settings.paddingLeft-4,l,4,1)):(e.handle.line(e.settings.paddingLeft,l,e.settings.paddingLeft+e.settings.canvasWidth,l,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:e.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(o),e.handle.rect(e.settings.paddingLeft-4,l,0,0,4,1,!1).attr({fill:e.settings.axisColor,"shape-rendering":"crispEdges",stroke:"none","stroke-width":0}).appendTo(o));for(l=e.settings.height-e.settings.paddingBottom,s=0,i=d.yMax;s<=i;s+=Math.ceil(i/e.settings.blockNum))a=e.settings.paddingLeft+e.settings.blockWidth*s,"canvas"===e.settings.plugin?(e.handle.attr({fillStyle:e.settings.axisColor,strokeStyle:"transparent"}).fillRect(a,l,1,4),e.handle.attr({lineWidth:1,strokeStyle:e.settings.lineRowColor}).setLineDash([5,2]).line(a+.5,e.settings.paddingTop,a+.5,e.settings.paddingTop+e.settings.canvasHeight).setLineDash([0])):(e.handle.rect(a,l,0,0,1,4,!1).attr({fill:e.settings.axisColor,"shape-rendering":"crispEdges",stroke:"none","stroke-width":0}).appendTo(o),e.handle.line(a,e.settings.paddingTop,a,e.settings.paddingTop+e.settings.canvasHeight,!1).attr({fill:"none","shape-rendering":"crispEdges","stroke-dasharray":"5,2",stroke:e.settings.lineRowColor,"stroke-width":1}).appendTo(o))}},setLabels:function(t){var e=this._getInst(t);if(!e)return L;this.getBounds(t);var s,i,n,a,l,r,o=this.getBounds2(t),g="canvas"===e.settings.plugin?{fillStyle:e.settings.textColor,font:e.settings.fontSize+" "+e.settings.fontFamily,strokeStyle:"transparent",textAlign:"center"}:(a=e.handle.g().attr({class:"zui-chart-labels zui-chart-labels-y"}).getShape(),n=e.handle.g().attr({class:"zui-chart-labels zui-chart-labels-x"}).getShape(),{fill:e.settings.textColor,"font-family":e.settings.fontFamily,"font-size":e.settings.fontSize,"text-anchor":"middle"});switch(e.settings.type){case"area":case"line":case"stepline":case"spline":case"column":case"candlestick":case"ohlc":case"scatter":case"bubble":for(-(d=1)!==z.inArray(e.settings.type,["ohlc","candlestick","pie","line","area","column","stepline","spline","scatter"])&&(d=0),c=e.settings.categories[0].category.length;d<=c;d++)p=-1===z.inArray(e.settings.type,["ohlc","candlestick","pie","line","area","column","stepline","spline","scatter"])?d-1:d,s=e.settings.paddingLeft+e.settings.blockWidth*p+e.settings.blockWidth/2,i=e.settings.height-e.settings.paddingBottom,d<c&&("canvas"===e.settings.plugin?e.handle.attr(g).text((-1===z.inArray(e.settings.type,["ohlc","candlestick","pie"])?e.settings.categories[0].category:e.settings.series)[d].label,s,i+20):e.handle.text(s,i+20,(-1===z.inArray(e.settings.type,["ohlc","candlestick","pie"])?e.settings.categories[0].category:e.settings.series)[d].label,!1).attr(g).appendTo(n));for(var h=o.yMax-o.yMin,d=0,c=o.yMax,p=o.yMin;d<=c;d+=Math.ceil(c/4),p+=Math.ceil(h/4))i=this.getYY(t,d),"canvas"===e.settings.plugin?e.handle.attr(g).attr({textBaseline:"middle"}).text(p%1==0?p:p.toFixed(1),e.settings.paddingLeft-20,i):(l=e.handle.factory("text",{x:e.settings.paddingLeft-10,y:i},!1).attr(g).attr({"text-anchor":"end"}).appendTo(a).getShape(),r=e.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(l).getShape(),e.handle.textNode(p%1==0?p:p.toFixed(1),!1).appendTo(r));break;case"bar":for(i=e.settings.height-e.settings.paddingBottom,d=0,c=o.yMax;d<=c;d+=Math.ceil(c/e.settings.blockNum))s=e.settings.paddingLeft+e.settings.blockWidth*d,"canvas"===e.settings.plugin?e.handle.attr(g).text(d,s,i+20):e.handle.text(s,i+20,d,!1).attr(g).appendTo(n);for(p=d=0,c=o.yMax;p<e.settings.blockNum;p++,d+=Math.ceil(c/e.settings.blockNum))i=e.settings.paddingTop+e.settings.blockHeight*d,"canvas"===e.settings.plugin?e.handle.attr(g).attr({textBaseline:"middle"}).text(e.settings.categories[0].category[p].label,e.settings.paddingLeft-20,i+e.settings.blockHeight/2):(l=e.handle.factory("text",!1).attr(g).attr({x:e.settings.paddingLeft-10,y:i+e.settings.blockHeight/2,"text-anchor":"end"}).appendTo(a).getShape(),r=e.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(l).getShape(),e.handle.textNode(e.settings.categories[0].category[p].label,!1).appendTo(r))}},setCircumference:function(t){var e=this._getInst(t);if(!e)return L;var s,i,n,a,l,r,o,g,h=[],d=Math.floor((e.settings.width-e.settings.paddingRight)/2),c=Math.floor(e.settings.height/2),p=360/e.settings.series[0].data.length,u=e.settings.radius/5;for("svg"===e.settings.plugin&&(o=e.handle.g().attr({class:"zui-chart-lines"}).getShape(),g=e.handle.g().attr({class:"zui-chart-grid"}).getShape()),i=e.settings.series[s=0].data.length;s<i;s++)l=d+e.settings.radius*Math.cos((p*s-90)*Math.PI/180),r=c+e.settings.radius*Math.sin((p*s-90)*Math.PI/180),"canvas"===e.settings.plugin?e.handle.attr({strokeStyle:e.settings.lineRowColor,lineWidth:1}).line(d,c,l,r):e.handle.line(d,c,l,r,!1).attr({fill:"none",stroke:e.settings.lineRowColor,"stroke-width":1}).appendTo(o);if("radar"===e.settings.type)for(n=0,a=5;n<a;n++){for(h[n]=[],i=e.settings.series[s=0].data.length;s<i;s++)l=d+(e.settings.radius-u*n)*Math.cos((p*s-90)*Math.PI/180),r=c+(e.settings.radius-u*n)*Math.sin((p*s-90)*Math.PI/180),0<s?h[n].push(["L",l,",",r].join("")):h[n].push(["M",l,",",r].join(""));"canvas"===e.settings.plugin?(h[n].push(h[n][0]),e.handle.attr({fillStyle:"transparent",strokeStyle:e.settings.lineRowColor,lineWidth:1}).path(h[n].join(""))):(h[n].push("Z"),e.handle.path(h[n].join(""),!1).attr({fill:"none",stroke:e.settings.lineRowColor,"stroke-width":1}).appendTo(g))}else for(n=0,a=5;n<a;n++)"canvas"===e.settings.plugin?e.handle.attr({fillStyle:"transparent",strokeStyle:e.settings.lineRowColor,lineWidth:1}).begin().circle(d,c,e.settings.radius-u*n).close().fill().stroke():e.handle.circle(d,c,e.settings.radius-u*n,!1).attr({fill:"none",stroke:e.settings.lineRowColor,"stroke-width":1}).appendTo(g)},setCircumferenceLabels:function(t){var e=this._getInst(t);if(!e)return L;var s,i,n,a,l,r,o,g,h,d,c=Math.floor((e.settings.width-e.settings.paddingRight)/2),p=Math.floor(e.settings.height/2),u=this.getBounds2(t),f=360/e.settings.series[0].data.length,v=e.settings.radius/5;for("svg"===e.settings.plugin&&(r=e.handle.g().attr({class:"zui-chart-labels"}).getShape(),o=e.handle.g().attr({class:"zui-chart-scale"}).getShape()),i=e.settings.categories[s=0].category.length;s<i;s++)("radar"===e.settings.type||(g=(f*s).toFixed(0),"categories"in e.settings&&e.settings.categories[0]&&"category"in e.settings.categories[0]&&e.settings.categories[0].category&&e.settings.categories[0].category[s]&&"label"in e.settings.categories[0].category[s]))&&(g=e.settings.categories[0].category[s].label),a=c+(e.settings.radius+20)*Math.cos((f*s-90)*Math.PI/180),l=p+(e.settings.radius+20)*Math.sin((f*s-90)*Math.PI/180),"canvas"===e.settings.plugin?e.handle.attr({textAlign:"center",textBaseline:"middle",fillStyle:e.settings.textColor,strokeStyle:"transparent",font:e.settings.fontSize+" "+e.settings.fontFamily}).text(g,a,l):(h=e.handle.factory("text",{x:a,y:l,fill:e.settings.textColor,"font-size":e.settings.fontSize,"font-family":e.settings.fontFamily,"text-anchor":"middle"},!1).appendTo(r).getShape(),d=e.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(h).getShape(),e.handle.textNode(g,!1).appendTo(d));for(n=0,0;n<5;n++)for(i=e.settings.series[s=0].data.length;s<i;s++)a=c+(e.settings.radius-v*n)*Math.cos((f*s-90)*Math.PI/180),l=p+(e.settings.radius-v*n)*Math.sin((f*s-90)*Math.PI/180),0<s||("canvas"===e.settings.plugin?e.handle.attr({textAlign:"right",textBaseline:"middle",fillStyle:e.settings.textColor,font:e.settings.fontSize+" "+e.settings.fontFamily}).text((u.yMax-u.yMax/5*n).toFixed(2),a-5,l):(h=e.handle.factory("text",{x:a-5,y:l,fill:e.settings.textColor,"font-size":e.settings.fontSize,"font-family":e.settings.fontFamily,"text-anchor":"end"},!1).appendTo(o).getShape(),d=e.handle.factory("tspan",{"alignment-baseline":"central"},!1).appendTo(h).getShape(),e.handle.textNode((u.yMax-u.yMax/5*n).toFixed(2),!1).appendTo(d)))},setAxis:function(t){t=this._getInst(t);if(!t)return L;var e,s=[];"svg"===t.settings.plugin&&(e=t.handle.g().attr({class:"zui-chart-axis"}).getShape()),"canvas"===t.settings.plugin?(s.push(["M",t.settings.paddingLeft+.5,",",t.settings.paddingTop].join("")),s.push(["L",t.settings.paddingLeft+.5,",",t.settings.paddingTop+t.settings.canvasHeight+.5].join("")),s.push(["L",t.settings.paddingLeft+t.settings.canvasWidth+.5,",",t.settings.paddingTop+t.settings.canvasHeight+.5].join("")),t.handle.attr({fillStyle:"transparent",strokeStyle:t.settings.axisColor,lineWidth:1}).path(s.join(""))):(s.push([t.settings.paddingLeft,",",t.settings.paddingTop].join("")),s.push([t.settings.paddingLeft,",",t.settings.paddingTop+t.settings.canvasHeight].join("")),s.push([t.settings.paddingLeft+t.settings.canvasWidth,",",t.settings.paddingTop+t.settings.canvasHeight].join("")),t.handle.polyline(s.join(" "),!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:t.settings.axisColor,"stroke-width":1}).appendTo(e))},scatter:function(t){var s=this._getInst(t);if(!s)return L;this.setGrid.call(this,t),this.setAxis.call(this,t);var e,i,n,a,l,r,o,g,h,d,c,p=this.getBounds2(t),u=I.getColors();for("canvas"===s.settings.plugin?g={fillStyle:s.settings.textColor,font:s.settings.fontSize+" "+s.settings.fontFamily,strokeStyle:"transparent"}:(o=s.handle.g().attr({class:"zui-chart-markers"}).getShape(),g={fill:s.settings.textColor,"font-family":s.settings.fontFamily,"font-size":s.settings.fontSize,"text-anchor":"middle"},h=s.handle.g().attr({class:"zui-chart-labels zui-chart-labels-y"}).getShape(),d=s.handle.g().attr({class:"zui-chart-labels zui-chart-labels-x"}).getShape()),i=s.settings.categories[e=0].category.length;e<i;e++)"canvas"===s.settings.plugin?s.handle.attr(g).attr({textAlign:"center"}).text(s.settings.categories[0].category[e].label,s.settings.paddingLeft+s.settings.blockWidth*e+s.settings.blockWidth/2,s.settings.height-s.settings.paddingBottom+20):s.handle.text(s.settings.paddingLeft+s.settings.blockWidth*e+s.settings.blockWidth/2,s.settings.height-s.settings.paddingBottom+20,s.settings.categories[0].category[e].label,!1).attr(g).attr({"text-anchor":"middle"}).appendTo(d);for(e=0;e<=p.yMax;e+=Math.ceil(p.yMax/4))"canvas"===s.settings.plugin?s.handle.attr(g).attr({textAlign:"right",textBaseline:"middle"}).text(e,s.settings.paddingLeft-20,this.getYY(t,e)):(c=s.handle.factory("text",!1).attr(g).attr({x:s.settings.paddingLeft-10,y:this.getYY(t,e),"text-anchor":"end"}).appendTo(h).getShape(),c=s.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(c).getShape(),s.handle.textNode(e,!1).appendTo(c));for(i=s.settings.series[e=0].data.length;e<i;e++)for(n=0,a=s.settings.series.length;n<a;n++)l=this.getX(t,s.settings.series[n].data[e].x),r=this.getY(t,s.settings.series[n].data[e].y),"canvas"===s.settings.plugin?s.handle.attr({fillStyle:s.settings.series[n].color||u[n],strokeStyle:"transparent"}).begin().circle(l,r,4).fill():s.handle.circle(l,r,4,!1).attr({fill:s.settings.series[n].color||u[n],"fill-opacity":1,stroke:"none","stroke-width":0}).appendTo(o);z(s.handle.svg).on("mouseover","circle",function(t){var e=z(this);s.handle.circle(e.attr("cx"),e.attr("cy"),6,!1).attr({fill:"none",stroke:e.attr("fill"),"stroke-width":1,class:"zui-chart-over"}).appendTo(o)}).on("mouseout","circle",function(t){z("circle.zui-chart-over").remove()})},spline:function(t){var e=this._getInst(t);if(!e)return L;this.setPlot.call(this,t);var s,i,n,a,l,r,o,g,h,d=[],c=this.getBounds2(t),p=I.getColors();for("svg"===e.settings.plugin&&(g=e.handle.g().attr({class:"zui-chart-canvas"}).getShape(),h=e.handle.g().attr({class:"zui-chart-points"}).getShape()),i=e.settings.series[s=0].data.length;s<i;s++)for(n=0,a=e.settings.series.length;n<a;n++)d[n]===_&&(d[n]=[]),d[n].push(e.settings.paddingTop+e.settings.canvasHeight-e.settings.canvasHeight*(e.settings.series[n].data[s].value/c.yMax));for(n=0,a=d.length;n<a;n++){for(l=[],s=0,i=d[n].length;s<i;s++)r=e.settings.paddingLeft+e.settings.blockWidth/2+s*e.settings.blockWidth,s!==i-1&&(o=e.settings.paddingLeft+e.settings.blockWidth/2+(s+1)*e.settings.blockWidth,"canvas"===e.settings.plugin&&e.handle.attr({fillStyle:"transparent",strokeStyle:e.settings.series[n].color||p[n],lineWidth:3}).begin().moveTo(r,d[n][s]).bezierCurveTo(r+e.settings.blockWidth/2,d[n][s],o-e.settings.blockWidth/2,d[n][s+1],o,d[n][s+1]).stroke(),l.push((0<s?"":"M"+r+","+d[n][s]+" ")+"C"+(r+e.settings.blockWidth/2)+","+d[n][s]+" "+(o-e.settings.blockWidth/2)+","+d[n][s+1]+" "+o+","+d[n][s+1])),"canvas"===e.settings.plugin?e.handle.attr({fillStyle:"#FFFFFF",strokeStyle:e.settings.series[n].color||p[n],lineWidth:1}).begin().circle(r,d[n][s],4).fill().stroke():e.handle.circle(r,d[n][s],4,!1).attr({fill:"#FFFFFF","fill-opacity":1,stroke:e.settings.series[n].color||p[n],"stroke-opacity":1,"stroke-width":1}).appendTo(h);"canvas"!==e.settings.plugin&&e.handle.path(l.join(" "),!1).attr({fill:"none",stroke:e.settings.series[n].color||p[n],"stroke-width":3,style:"stroke-dasharray: 3000,3000"}).appendTo(g)}},stepline:function(t){var e=this._getInst(t);if(!e)return L;this.setPlot.call(this,t);var s,i,n,a,l,r,o,g,h=I.getColors(),d=[];for("svg"===e.settings.plugin&&(l=e.handle.g().attr({class:"zui-chart-canvas","clip-path":"url(#zinoui-"+e.uid+")"}).getShape()),s=0,i=e.settings.series.length;s<i;s++)for(r=e.settings.paddingLeft+e.settings.blockWidth/2,d[s]=[],n=0,a=e.settings.series[s].data.length;n<a;n++)o=e.settings.paddingLeft+e.settings.blockWidth*n+e.settings.blockWidth/2,g=this.getY(t,e.settings.series[s].data[n].value),0<n?"backward"===e.settings.progression?(d[s].push(["L",o-e.settings.blockWidth,",",g].join("")),d[s].push(["L",o,",",g].join(""))):(d[s].push(["L",o,",",g].join("")),n<a-1&&d[s].push(["L",o+e.settings.blockWidth,",",g].join(""))):"backward"===e.settings.progression?d[s].push(["M",r,",",g].join("")):(d[s].push(["M",r,",",g].join("")),d[s].push(["L",r+e.settings.blockWidth,",",g].join("")));for(s=0,i=d.length;s<i;s++)"canvas"===e.settings.plugin?e.handle.attr({fillStyle:"transparent",strokeStyle:e.settings.series[s].color||h[s],lineWidth:2}).path(d[s].join("")):e.handle.path(d[s].join(""),!1).attr({fill:"none",stroke:e.settings.series[s].color||h[s],"stroke-width":2,style:"stroke-dasharray: 3000,3000","marker-start":"url(#marker-"+s+")","marker-mid":"url(#marker-"+s+")","marker-end":"url(#marker-"+s+")"}).appendTo(l);for(s=0,i=e.settings.series.length;s<i;s++)for(n=0,a=e.settings.series[s].data.length;n<a;n++)o=e.settings.paddingLeft+e.settings.blockWidth*n+e.settings.blockWidth/2,g=this.getY(t,e.settings.series[s].data[n].value),"canvas"===e.settings.plugin?e.handle.attr({fillStyle:"#FFFFFF",strokeStyle:e.settings.series[s].color||h[s],lineWidth:2}).begin().circle(o,g,4).close().fill().stroke():e.handle.circle(o,g,4,!1).attr({fill:"#FFFFFF",stroke:e.settings.series[s].color||h[s],"stroke-width":2}).appendTo(l)},symbol:function(t,e,s,i){var n=this._getInst(t);if(!n)return L;if("canvas"!==n.settings.plugin)switch(e){case"":case"":case"":break;default:n.handle.circle(!1).attr({}).appendTo(i)}},_mouseenter:function(t,e,s){t=this._getInst(t);if(!t)return L;t.settings.tooltip&&"svg"===t.settings.plugin&&(this.tooltip[t.uid].txt.firstChild.firstChild.nodeValue=s.getAttributeNS("zui","tooltip"),s=this.tooltip[t.uid].txt.getBBox(),this.tooltip[t.uid].rect.setAttributeNS(null,"width",Number(s.width)+10),this.tooltip[t.uid].rect.setAttributeNS(null,"height",Number(s.height)+10),this.tooltip[t.uid].g1.setAttributeNS(null,"visibility","visible"))},_mouseleave:function(t,e,s){t=this._getInst(t);if(!t)return L;t.settings.tooltip&&"svg"===t.settings.plugin&&this.tooltip[t.uid].g1.setAttributeNS(null,"visibility","hidden")},_mousemove:function(t,e,s){var i,n,a,t=this._getInst(t);if(!t)return L;t.settings.tooltip&&"svg"===t.settings.plugin&&(i=e.offsetX,e=e.offsetY,n=parseInt(this.tooltip[t.uid].rect.getAttributeNS(null,"width"),10),e+(a=parseInt(this.tooltip[t.uid].rect.getAttributeNS(null,"height"),10))+t.settings.tooltip.offset.y>t.settings.height&&(e-=a+t.settings.tooltip.offset.y),i+n+t.settings.tooltip.offset.x>t.settings.width&&(i-=n+t.settings.tooltip.offset.x),this.tooltip[t.uid].g1.setAttributeNS(null,"transform",["translate(",i,",",e,")"].join("")))},_tooltip:function(t){t=this._getInst(t);if(!t)return L;t.settings.tooltip&&"svg"===t.settings.plugin&&(this.tooltip[t.uid].g1=t.handle.g().attr({class:"zui-chart-tooltip",visibility:"hidden",transform:"translate(0,0)"}).getShape(),this.tooltip[t.uid].rect=t.handle.rect(t.settings.tooltip.offset.x,t.settings.tooltip.offset.y,0,0,100,22,!1).attr({fill:t.settings.tooltip.fill,opacity:t.settings.tooltip.opacity}).appendTo(this.tooltip[t.uid].g1).getShape(),this.tooltip[t.uid].txt=t.handle.factory("text",!1).attr({x:20,y:20,fill:t.settings.tooltip.color,"font-family":t.settings.fontFamily,"font-size":t.settings.fontSize,"text-anchor":"start"}).appendTo(this.tooltip[t.uid].g1).getShape(),this.tooltip[t.uid].span=t.handle.factory("tspan",!1).attr({"alignment-baseline":"text-before-edge"}).appendTo(this.tooltip[t.uid].txt).getShape(),t.handle.textNode("",!1).appendTo(this.tooltip[t.uid].span))},_newInst:function(t){return{id:t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:t,uid:Math.floor(99999999*Math.random()),isDisabled:L,settings:{}}},_getInst:function(t){try{return z.data(t,a)}catch(t){throw"Missing instance data for this chart"}}},z.fn.zinoChart=function(t){var e=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&"isDisabled"===t||"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?z.zinoChart["_"+t+"Chart"].apply(z.zinoChart,[this[0]].concat(e)):this.each(function(){"string"==typeof t?z.zinoChart["_"+t+"Chart"].apply(z.zinoChart,[this].concat(e)):z.zinoChart._attachChart(this,t)})},z.zinoChart=new I,z.zinoChart.version="1.5.1"}(jQuery);