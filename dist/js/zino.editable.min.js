!function(b){"use strict";var c="editable",r=!1;function t(){this._defaults={control:"input",event:"click",buttons:{OK:function(t){b(this).zinoEditable("save")},Cancel:function(t){b(this).zinoEditable("close")}},load:null,save:null,close:null,enable:null,disable:null}}t.prototype={_attachEditable:function(i,t){if(this._getInst(i))return r;var e,n,a,l,s=b(i),o=this,d=o._newInst(s);switch(b.extend(d.settings,o._defaults,t),t=s.offset(),e=b("<div>",{id:"zui-editable-"+d.uid}).hide().addClass("zui-editable-wrapper zui-unselectable").css({left:t.left+"px",top:t.top+"px"}).bind("mousedown.editable",function(t){t.stopPropagation()}).bind("keydown.editable",function(t){27===(t.charCode||t.keyCode||0)&&(t.stopPropagation(),o._closeEditable.call(o,i))}),n=b("<"+d.settings.control+">",{autocomplete:"off"}).bind("keydown.editable",function(t){13===(t.charCode||t.keyCode||0)&&o._saveEditable.call(o,i)}).addClass("zui-editable-control").appendTo(e),d.settings.control){case"input":n.css({width:s.width()+10+"px"});break;case"textarea":n.css({height:s.height()+30+"px",width:s.width()+"px"})}for(l in d.settings.buttons)d.settings.buttons.hasOwnProperty(l)&&(a=b("<input>",{type:"button"}).val(l).addClass("zui-editable-button").bind("click.editable",function(e,i){return function(t){d.settings.buttons[e].call(i,this)}}(l,i)).appendTo(e),void 0!==b.fn.zinoButton)&&a.zinoButton();s.addClass("zui-editable").bind(d.settings.event+".editable",function(t){t.stopPropagation(),o._loadEditable.call(o,i)}).bind("editableload",function(t,e){null!==d.settings.load&&d.settings.load.call(i,t,e)}).bind("editablesave",function(t,e){null!==d.settings.save&&d.settings.save.call(i,t,e)}).bind("editableclose",function(t,e){null!==d.settings.close&&d.settings.close.call(i,t,e)}).bind("editableenable",function(t,e){null!==d.settings.enable&&d.settings.enable.call(i,t,e)}).bind("editabledisable",function(t,e){null!==d.settings.disable&&d.settings.disable.call(i,t,e)}),e.appendTo(document.body),b(window).off(".editable").on("mousedown.editable",document.body,function(t){b(t.target).hasClass("zui-editable-button")||(t.stopPropagation(),b(".zui-editable").zinoEditable("close"))}),d.container=e,d.control=n,b.data(i,c,d)},_loadEditable:function(t){var e=this._getInst(t);return!e||(t=b(t)).hasClass("zui-editable-disabled")?r:(t.css("visibility","hidden"),t.trigger("editableload",{}),e.control.val(t.text()),e.container.show(),void e.control.select())},_saveEditable:function(t){var e=this._getInst(t);if(!e)return r;var i=b(t);i.trigger("editablesave",{control:e.control}),i.text(e.container.find(".zui-editable-control").val()),this._closeEditable.call(this,t)},_closeEditable:function(t){var e=this._getInst(t);if(!e)return r;t=b(t);t.trigger("editableclose",{}),e.container.find(".zui-editable-control").val("").end().hide(),t.css("visibility","visible")},_destroyEditable:function(t){var e=this._getInst(t);if(!e)return r;var i=b(t);this._closeEditable.call(this,t),i.unbind(".editable").removeClass("zui-editable"),e.container.remove(),b.removeData(t,c)},_enableEditable:function(t){return this._getInst(t)&&(t=b(t)).hasClass("zui-editable-disabled")?void t.removeClass("zui-editable-disabled").trigger("editableenable",{}):r},_disableEditable:function(t){return!this._getInst(t)||(t=b(t)).hasClass("zui-editable-disabled")?r:void t.addClass("zui-editable-disabled").trigger("editabledisable",{})},_newInst:function(t){return{id:t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:t,uid:Math.floor(99999999*Math.random()),isDisabled:r,settings:{}}},_getInst:function(t){try{return b.data(t,c)}catch(t){throw"Missing instance data for this editable"}}},b.fn.zinoEditable=function(t){var e=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&"isDisabled"===t||"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?b.zinoEditable["_"+t+"Editable"].apply(b.zinoEditable,[this[0]].concat(e)):this.each(function(){"string"==typeof t?b.zinoEditable["_"+t+"Editable"].apply(b.zinoEditable,[this].concat(e)):b.zinoEditable._attachEditable(this,t)})},b.zinoEditable=new t,b.zinoEditable.version="1.5"}(jQuery);